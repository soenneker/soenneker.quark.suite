@page "/surfaces/buttons"

<PageTitle>Button - Quark Suite</PageTitle>

<Div Class="space-y-8 max-w-4xl">
    <Div>
        <Div Class="space-y-3">
            <H1 Class="text-4xl font-bold tracking-tight">Button</H1>
            <Paragraph Class="text-xl text-muted-foreground" Margin="Margin.Is0">
                Displays a button or a component that looks like a button. Use <Code Inline="true" Class="rounded bg-muted px-1.5 py-0.5 text-sm font-mono">Variant</Code> for styling.
            </Paragraph>
        </Div>
    </Div>

    <Div Class="space-y-6">
        <section class="space-y-4">
        <DemoSection Title="Default, Secondary, Destructive, Outline, Ghost, Link"
                    Description="Solid variants use theme tokens; outline uses border-input."
                    Code="@(@"<Button Variant=""ButtonVariant.Default"">Default</Button>
<Button Variant=""ButtonVariant.Secondary"">Secondary</Button>
<Button Variant=""ButtonVariant.Destructive"">Destructive</Button>
<Button Variant=""ButtonVariant.Outline"">Outline</Button>
<Button Variant=""ButtonVariant.Ghost"">Ghost</Button>
<Button Variant=""ButtonVariant.Link"">Link</Button>")">
            <Div Class="flex flex-wrap gap-2">
                <Button Variant="ButtonVariant.Default" OnClick="HandleBasicClick">Default</Button>
                <Button Variant="ButtonVariant.Secondary" OnClick="HandleBasicClick">Secondary</Button>
                <Button Variant="ButtonVariant.Destructive" OnClick="HandleBasicClick">Destructive</Button>
                <Button Variant="ButtonVariant.Outline" OnClick="HandleBasicClick">Outline</Button>
                <Button Variant="ButtonVariant.Ghost" OnClick="HandleBasicClick">Ghost</Button>
                <Button Variant="ButtonVariant.Link" OnClick="HandleBasicClick">Link</Button>
            </Div>
        </DemoSection>
        </section>

        <section class="space-y-4">
        <DemoSection Title="Sizes" Description="Sm, Default, Lg, and Icon (square) sizes."
                    Code="@(@"<Button Size=""ButtonSize.Sm"">Sm</Button>
<Button Size=""ButtonSize.Default"">Default</Button>
<Button Size=""ButtonSize.Lg"">Lg</Button>
<Button Size=""ButtonSize.Icon"" aria-label=""Icon"">ðŸ”˜</Button>")">
            <Div Class="flex flex-wrap items-center gap-2">
                <Button Variant="ButtonVariant.Default" Size="ButtonSize.Sm" OnClick="HandleBasicClick">Sm</Button>
                <Button Variant="ButtonVariant.Default" Size="ButtonSize.Default" OnClick="HandleBasicClick">Default</Button>
                <Button Variant="ButtonVariant.Default" Size="ButtonSize.Lg" OnClick="HandleBasicClick">Lg</Button>
                <Button Variant="ButtonVariant.Default" Size="ButtonSize.Icon" OnClick="HandleBasicClick" aria-label="Icon button">ðŸ”˜</Button>
            </Div>
        </DemoSection>
        </section>

        <section class="space-y-4">
        <DemoSection Title="Border colors" Description="Use BorderColor with Border for outlined buttons with theme colors.">
            <Div Class="flex flex-wrap gap-2">
                <Button BorderColor="@BorderColor.Primary" Border="Border.Is1" OnClick="HandleBasicClick">Primary</Button>
                <Button BorderColor="@BorderColor.Secondary" Border="Border.Is1" OnClick="HandleBasicClick">Secondary</Button>
                <Button BorderColor="@BorderColor.Success" Border="Border.Is1" OnClick="HandleBasicClick">Success</Button>
                <Button BorderColor="@BorderColor.Danger" Border="Border.Is1" OnClick="HandleBasicClick">Danger</Button>
                <Button BorderColor="@BorderColor.Primary.Opacity75" Border="Border.Is2" OnClick="HandleBasicClick">Primary 75%</Button>
            </Div>
        </DemoSection>
        </section>

        <section class="space-y-4">
        <DemoSection Title="Loading state" Description="Set Loading=true to show a spinner and disable the button. Use LoadingTemplate for custom loading UI."
                    Code="@(@"<Button Loading=""_isLoading"" OnClick=""HandleLoadingClick"">Click to Load</Button>")">
            <Div Class="flex flex-wrap gap-2">
                <Button Variant="ButtonVariant.Default" Loading="_isLoading" OnClick="HandleLoadingClick">Click to Load</Button>
                <Button Variant="ButtonVariant.Secondary" Loading="_isLoading2" OnClick="HandleLoadingClick2">Process Data</Button>
                <Button Variant="ButtonVariant.Outline" Loading="_isLoading3" OnClick="HandleLoadingClick3">Custom Loading</Button>
                <Button Variant="ButtonVariant.Outline" Loading="_isLoading4" OnClick="HandleLoadingClick4" LoadingTemplate="@CustomLoadingTemplate">Custom Template</Button>
            </Div>
        </DemoSection>
        </section>

        <section class="space-y-4">
        <DemoSection Title="Disabled" Description="Disabled buttons do not fire click events.">
            <Div Class="flex flex-wrap gap-2">
                <Button Variant="ButtonVariant.Default" Disabled>Disabled</Button>
                <Button Variant="ButtonVariant.Outline" Disabled>Disabled Outline</Button>
            </Div>
        </DemoSection>
        </section>

        <section class="space-y-4">
        <DemoSection Title="With events" Description="OnClick and other events work as expected. Example shows click count and time.">
            <Div Class="flex flex-wrap items-center gap-2">
                <Button Variant="ButtonVariant.Default" OnClick="HandleClickWithData">Click Count: @_clickCount</Button>
                <Span Class="text-sm text-muted-foreground">Last clicked: @_lastClickTime</Span>
            </Div>
        </DemoSection>
        </section>
    </Div>
</Div>

@code {
    private bool _isLoading;
    private bool _isLoading2;
    private bool _isLoading3;
    private bool _isLoading4;
    private int _clickCount;
    private string _lastClickTime = "";

    private RenderFragment CustomLoadingTemplate => @<Span Class="inline-flex items-center gap-2">
        <Icon Name="spinner" IconAnimation="IconAnimation.Spin" IconSize="IconSize.Large"/>
        <Span>Loading...</Span>
    </Span>;

    private async Task HandleBasicClick(MouseEventArgs args) => await Task.CompletedTask;

    private async Task HandleLoadingClick(MouseEventArgs args)
    {
        _isLoading = true; StateHasChanged();
        await Task.Delay(3000);
        _isLoading = false; StateHasChanged();
    }

    private async Task HandleLoadingClick2(MouseEventArgs args)
    {
        _isLoading2 = true; StateHasChanged();
        await Task.Delay(2000);
        _isLoading2 = false; StateHasChanged();
    }

    private async Task HandleLoadingClick3(MouseEventArgs args)
    {
        _isLoading3 = true; StateHasChanged();
        await Task.Delay(2500);
        _isLoading3 = false; StateHasChanged();
    }

    private async Task HandleLoadingClick4(MouseEventArgs args)
    {
        _isLoading4 = true; StateHasChanged();
        await Task.Delay(4000);
        _isLoading4 = false; StateHasChanged();
    }

    private async Task HandleClickWithData(MouseEventArgs args)
    {
        _clickCount++;
        _lastClickTime = DateTime.Now.ToString("HH:mm:ss");
        await Task.CompletedTask;
    }
}
