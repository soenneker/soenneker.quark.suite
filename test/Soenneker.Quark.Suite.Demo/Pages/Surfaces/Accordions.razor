@page "/surfaces/accordions"

<PageTitle>Accordion - Quark Suite</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div class="space-y-4">
        <DemoSection Title="Single (default)" Description="Only one item open at a time." Code="@(@"<Accordion>
    <AccordionItem Value=""item-1"">
        <AccordionTrigger>Is it accessible?</AccordionTrigger>
        <AccordionContent>Yes. Uses semantic button semantics with aria attributes.</AccordionContent>
    </AccordionItem>
</Accordion>")">
            <Accordion Class="w-full">
                <AccordionItem Value="item-1">
                    <AccordionTrigger>Is it accessible?</AccordionTrigger>
                    <AccordionContent>
                        <Paragraph Margin="Margin.Is0">
                            Yes. Quark's Accordion uses semantic triggers with aria attributes and keyboard-focus styles.
                        </Paragraph>
                    </AccordionContent>
                </AccordionItem>
                <AccordionItem Value="item-2">
                    <AccordionTrigger>Does it support custom styling?</AccordionTrigger>
                    <AccordionContent>
                        <Paragraph Margin="Margin.Is0">
                            Yes. Add Tailwind utilities through <code>Class</code> on any accordion primitive.
                        </Paragraph>
                    </AccordionContent>
                </AccordionItem>
                <AccordionItem Value="item-3">
                    <AccordionTrigger>Can I render complex content?</AccordionTrigger>
                    <AccordionContent>
                        <Div Class="space-y-2">
                            <Paragraph Margin="Margin.Is0">You can place any Quark components inside accordion content.</Paragraph>
                            <Button Size="ButtonSize.Sm">Example Action</Button>
                        </Div>
                    </AccordionContent>
                </AccordionItem>
            </Accordion>
        </DemoSection>

        <DemoSection Title="Multiple mode" Description="Allow many items open at once via Multiple=true." Code="@(@"<Accordion Multiple=""true"">
    <AccordionItem Value=""a"">...</AccordionItem>
    <AccordionItem Value=""b"">...</AccordionItem>
</Accordion>")">
            <Accordion Multiple="true" Class="w-full">
                <AccordionItem Value="multi-a">
                    <AccordionTrigger>First section</AccordionTrigger>
                    <AccordionContent>
                        <Paragraph Margin="Margin.Is0">This accordion allows multiple expanded items.</Paragraph>
                    </AccordionContent>
                </AccordionItem>
                <AccordionItem Value="multi-b">
                    <AccordionTrigger>Second section</AccordionTrigger>
                    <AccordionContent>
                        <Paragraph Margin="Margin.Is0">Open this without closing the first one.</Paragraph>
                    </AccordionContent>
                </AccordionItem>
                <AccordionItem Value="multi-c" Disabled="true">
                    <AccordionTrigger>Disabled item</AccordionTrigger>
                    <AccordionContent>
                        <Paragraph Margin="Margin.Is0">Disabled items are non-interactive.</Paragraph>
                    </AccordionContent>
                </AccordionItem>
            </Accordion>
        </DemoSection>

        <DemoSection Title="Controlled value" Description="@($"Current open item: {_selectedItem ?? "none"}")" Code="@(@"<Accordion Value=""_selectedItem"" ValueChanged=""HandleAccordionValueChanged"">...</Accordion>")">
            <Div Class="space-y-3">
                <Div Class="flex flex-wrap gap-2">
                    <Button Size="ButtonSize.Sm" OnClick="OpenFirst">Open first</Button>
                    <Button Size="ButtonSize.Sm" Variant="ButtonVariant.Secondary" OnClick="OpenSecond">Open second</Button>
                    <Button Size="ButtonSize.Sm" Variant="ButtonVariant.Outline" OnClick="CloseAll">Close all</Button>
                </Div>
                <Accordion Value="@_selectedItem" ValueChanged="HandleAccordionValueChanged" Class="w-full">
                    <AccordionItem Value="control-1">
                        <AccordionTrigger>Controlled item one</AccordionTrigger>
                        <AccordionContent>
                            <Paragraph Margin="Margin.Is0">This section is controlled by external state.</Paragraph>
                        </AccordionContent>
                    </AccordionItem>
                    <AccordionItem Value="control-2">
                        <AccordionTrigger>Controlled item two</AccordionTrigger>
                        <AccordionContent>
                            <Paragraph Margin="Margin.Is0">Use buttons above or click this trigger directly.</Paragraph>
                        </AccordionContent>
                    </AccordionItem>
                </Accordion>
            </Div>
        </DemoSection>
    </div>
</div>

@code {
    private string? _selectedItem = "control-1";

    private Task HandleAccordionValueChanged(string? value)
    {
        _selectedItem = value;
        StateHasChanged();
        return Task.CompletedTask;
    }

    private Task SetSelected(string? value)
    {
        _selectedItem = value;
        StateHasChanged();
        return Task.CompletedTask;
    }

    private Task OpenFirst(MouseEventArgs args) => SetSelected("control-1");

    private Task OpenSecond(MouseEventArgs args) => SetSelected("control-2");

    private Task CloseAll(MouseEventArgs args) => SetSelected(null);
}
