@page "/navigation/tabs"

<PageTitle>Tabs - Quark Suite</PageTitle>

<Div Class="space-y-8 max-w-4xl">
    <Div Class="space-y-6">
        <section class="space-y-4">
            <DemoSection Title="Basic tabs" Description="Tab components with Name and Title. First tab is selected by default."
                        Code="@(@"<Tabs>
    <Tab Name=""tab1"" Title=""Home""><Div Class=""p-3""><H5>Content</H5></Div></Tab>
    <Tab Name=""tab2"" Title=""Profile""><Div Class=""p-3""><H5>Profile</H5></Div></Tab>
</Tabs>")">
                <Tabs>
                        <Tab Name="tab1" Title="Home">
                            <Div Class="p-3">
                                <H5>Home Content</H5>
                                <Paragraph>This is the content for the Home tab. You can put any content here including other components.</Paragraph>
                                <Button BackgroundColor="BackgroundColor.Primary">Action Button</Button>
                            </Div>
                        </Tab>
                        <Tab Name="tab2" Title="Profile">
                            <Div Class="p-3">
                                <H5>Profile Content</H5>
                                <Paragraph Margin="Margin.Is0">This is the content for the Profile tab. Here you might display user information or settings.</Paragraph>
                                <Div Class="space-y-1">
                                    <Label Form="true">Name:</Label>
                                    <TextEdit Placeholder="Enter your name" />
                                </Div>
                            </Div>
                        </Tab>
                        <Tab Name="tab3" Title="Settings">
                            <Div Class="p-3">
                                <H5>Settings Content</H5>
                                <Paragraph>This is the content for the Settings tab. Configuration options would go here.</Paragraph>
                                <Switch @bind-Checked="_setting1">Enable notifications</Switch>
                            </Div>
                        </Tab>
                    </Tabs>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Controlled tabs" Description="@($"SelectedTab and OnSelectedTabChanged; current: {_selectedTab}.")" Code="@(@"<Tabs SelectedTab=""_selectedTab"" OnSelectedTabChanged=""HandleTabChanged"">
    <Tab Name=""controlled1"" Title=""First Tab""><Div Class=""p-3"">First content</Div></Tab>
    <Tab Name=""controlled2"" Title=""Second Tab""><Div Class=""p-3"">Second content</Div></Tab>
    <Tab Name=""controlled3"" Title=""Third Tab""><Div Class=""p-3"">Third content</Div></Tab>
</Tabs>")">
                <Div Class="rounded-xl border border-border bg-muted/30 p-6">
                    <Tabs SelectedTab="@_selectedTab" OnSelectedTabChanged="HandleTabChanged">
                        <Tab Name="controlled1" Title="First Tab">
                            <Div Class="p-3">
                                <H5>First Tab Content</H5>
                                <Paragraph Margin="Margin.Is0">This is the first tab content. Current selected tab: <Strong>@_selectedTab</Strong></Paragraph>
                            </Div>
                        </Tab>
                        <Tab Name="controlled2" Title="Second Tab">
                            <Div Class="p-3">
                                <H5>Second Tab Content</H5>
                                <Paragraph Margin="Margin.Is0">This is the second tab content. Current selected tab: <Strong>@_selectedTab</Strong></Paragraph>
                            </Div>
                        </Tab>
                        <Tab Name="controlled3" Title="Third Tab">
                            <Div Class="p-3">
                                <H5>Third Tab Content</H5>
                                <Paragraph Margin="Margin.Is0">This is the third tab content. Current selected tab: <Strong>@_selectedTab</Strong></Paragraph>
                            </Div>
                        </Tab>
                    </Tabs>
                </Div>
                <Div Class="flex flex-wrap gap-2 mt-4">
                    <Button Class="bg-primary text-primary-foreground" Size="ButtonSize.Sm" OnClick="GoToFirstTab">First</Button>
                    <Button Class="bg-secondary text-secondary-foreground" Size="ButtonSize.Sm" OnClick="GoToSecondTab">Second</Button>
                    <Button Class="bg-primary text-primary-foreground" Size="ButtonSize.Sm" OnClick="GoToThirdTab">Third</Button>
                </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Pills style" Description="Pills variant for tab headers." Code="@(@"<Tabs Pills=""true"">
    <Tab Name=""pills1"" Title=""Pill 1""><Div Class=""p-3"">Pill Tab 1</Div></Tab>
    <Tab Name=""pills2"" Title=""Pill 2""><Div Class=""p-3"">Pill Tab 2</Div></Tab>
    <Tab Name=""pills3"" Title=""Pill 3""><Div Class=""p-3"">Pill Tab 3</Div></Tab>
</Tabs>")">
                <Div Class="rounded-xl border border-border bg-muted/30 p-6">
                    <H5 Class="text-sm font-medium text-muted-foreground">Pills</H5>
                    <Tabs Pills="true">
                        <Tab Name="pills1" Title="Pill 1">
                            <Div Class="p-3">
                                <H5>Pill Tab 1</H5>
                                <Paragraph>This tab uses the pills style for a different appearance.</Paragraph>
                            </Div>
                        </Tab>
                        <Tab Name="pills2" Title="Pill 2">
                            <Div Class="p-3">
                                <H5>Pill Tab 2</H5>
                                <Paragraph>Another pill-style tab with different content.</Paragraph>
                            </Div>
                        </Tab>
                        <Tab Name="pills3" Title="Pill 3">
                            <Div Class="p-3">
                                <H5>Pill Tab 3</H5>
                                <Paragraph>Third pill-style tab to demonstrate the styling.</Paragraph>
                            </Div>
                        </Tab>
                    </Tabs>
                </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Tabs with icons" Description="IconName on each tab (home, user, cog, envelope)." Code="@(@"<Tabs>
    <Tab Name=""icon1"" Title=""Home"" IconName=""home""><Div Class=""p-3"">Home with Icon</Div></Tab>
    <Tab Name=""icon2"" Title=""Profile"" IconName=""user""><Div Class=""p-3"">Profile with Icon</Div></Tab>
    <Tab Name=""icon3"" Title=""Settings"" IconName=""cog""><Div Class=""p-3"">Settings with Icon</Div></Tab>
</Tabs>")">
                <Div Class="rounded-xl border border-border bg-muted/30 p-6">
                    <Tabs>
                        <Tab Name="icon1" Title="Home" IconName="home">
                            <Div Class="p-3">
                                <H5>Home with Icon</H5>
                                <Paragraph>This tab has a home icon in the title.</Paragraph>
                            </Div>
                        </Tab>
                        <Tab Name="icon2" Title="Profile" IconName="user">
                            <Div Class="p-3">
                                <H5>Profile with Icon</H5>
                                <Paragraph>This tab has a user icon in the title.</Paragraph>
                            </Div>
                        </Tab>
                        <Tab Name="icon3" Title="Settings" IconName="cog">
                            <Div Class="p-3">
                                <H5>Settings with Icon</H5>
                                <Paragraph>This tab has a settings icon in the title.</Paragraph>
                            </Div>
                        </Tab>
                        <Tab Name="icon4" Title="Messages" IconName="envelope">
                            <Div Class="p-3">
                                <H5>Messages with Icon</H5>
                                <Paragraph>This tab has an envelope icon in the title.</Paragraph>
                            </Div>
                        </Tab>
                    </Tabs>
                </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Vertical tabs" Description="Tabs on the left side." Code="@(@"<Tabs Vertical=""true"">
    <Tab Name=""vertical1"" Title=""Dashboard""><Div Class=""p-3"">Dashboard content</Div></Tab>
    <Tab Name=""vertical2"" Title=""Analytics""><Div Class=""p-3"">Analytics content</Div></Tab>
    <Tab Name=""vertical3"" Title=""Reports""><Div Class=""p-3"">Reports content</Div></Tab>
</Tabs>")">
                <Div Class="rounded-xl border border-border bg-muted/30 p-6">
                    <Tabs Vertical="true">
                        <Tab Name="vertical1" Title="Dashboard">
                            <Div Class="p-3">
                                <H5>Dashboard Content</H5>
                                <Paragraph>This is a vertical tab layout. The tabs are displayed on the left side.</Paragraph>
                                <Row>
                                    <Column ColumnSize="ColumnSize.Is4.OnMd">
                                        <Card>
                                            <CardBody>
                                                <CardTitle>Widget 1</CardTitle>
                                                <CardText>Some content here</CardText>
                                            </CardBody>
                                        </Card>
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is4.OnMd">
                                        <Card>
                                            <CardBody>
                                                <CardTitle>Widget 2</CardTitle>
                                                <CardText>Some content here</CardText>
                                            </CardBody>
                                        </Card>
                                    </Column>
                                    <Column ColumnSize="ColumnSize.Is4.OnMd">
                                        <Card>
                                            <CardBody>
                                                <CardTitle>Widget 3</CardTitle>
                                                <CardText>Some content here</CardText>
                                            </CardBody>
                                        </Card>
                                    </Column>
                                </Row>
                            </Div>
                        </Tab>
                        <Tab Name="vertical2" Title="Analytics">
                            <Div Class="p-3">
                                <H5>Analytics Content</H5>
                                <Paragraph>Analytics and reporting features would be displayed here.</Paragraph>
                                <div class="progress mb-2">
                                    <div class="progress-bar" style="width: 75%">75%</div>
                                </div>
                                <div class="progress mb-2">
                                    <div class="progress-bar bg-success" style="width: 60%">60%</div>
                                </div>
                                <div class="progress">
                                    <div class="progress-bar bg-warning" style="width: 40%">40%</div>
                                </div>
                            </Div>
                        </Tab>
                        <Tab Name="vertical3" Title="Reports">
                            <Div Class="p-3">
                                <H5>Reports Content</H5>
                                <Paragraph>Various reports and data visualization would be shown here.</Paragraph>
                                <Button BackgroundColor="BackgroundColor.Primary">Generate Report</Button>
                                <Button BackgroundColor="BackgroundColor.Secondary">Export Data</Button>
                            </Div>
                        </Tab>
                    </Tabs>
                </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Disabled tab" Description="One tab is disabled." Code="@(@"<Tabs>
    <Tab Name=""disabled1"" Title=""Enabled Tab""><Div Class=""p-3"">This tab is enabled</Div></Tab>
    <Tab Name=""disabled2"" Title=""Disabled Tab"" Disabled=""true""><Div Class=""p-3"">Disabled content</Div></Tab>
    <Tab Name=""disabled3"" Title=""Another Enabled Tab""><Div Class=""p-3"">Also enabled</Div></Tab>
</Tabs>")">
                <Div Class="rounded-xl border border-border bg-muted/30 p-6">
                    <Tabs>
                        <Tab Name="disabled1" Title="Enabled Tab">
                            <Div Class="p-3">
                                <H5>This tab is enabled</H5>
                                <Paragraph>You can interact with this tab normally.</Paragraph>
                            </Div>
                        </Tab>
                        <Tab Name="disabled2" Title="Disabled Tab" Disabled="true">
                            <Div Class="p-3">
                                <H5>This tab is disabled</H5>
                                <Paragraph>This content won't be shown because the tab is disabled.</Paragraph>
                            </Div>
                        </Tab>
                        <Tab Name="disabled3" Title="Another Enabled Tab">
                            <Div Class="p-3">
                                <H5>This tab is also enabled</H5>
                                <Paragraph>You can switch to this tab as well.</Paragraph>
                            </Div>
                        </Tab>
                    </Tabs>
                </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Dynamic tabs" Description="@($"Add/remove tabs; count: {_dynamicTabs.Count}.")" Code="@(@"<Tabs SelectedTab=""_dynamicSelectedTab"" OnSelectedTabChanged=""HandleDynamicTabChanged"">
    @foreach (DynamicTab tab in _dynamicTabs) {
        <Tab Name=""@tab.Name"" Title=""@tab.Title""><Div Class=""p-3"">@tab.Content</Div></Tab>
    }
</Tabs>
<Button OnClick=""AddTab"">Add Tab</Button>
<Button OnClick=""RemoveTab"">Remove Tab</Button>")">
                <Div Class="rounded-xl border border-border bg-muted/30 p-6">
                    <Tabs SelectedTab="@_dynamicSelectedTab" OnSelectedTabChanged="HandleDynamicTabChanged">
                        @foreach (DynamicTab tab in _dynamicTabs)
                        {
                            <Tab Name="@tab.Name" Title="@tab.Title">
                                <Div Class="p-3">
                                    <H5>@tab.Title Content</H5>
                                    <Paragraph>This is dynamic tab content for: <Strong>@tab.Title</Strong></Paragraph>
                                    <Paragraph>Tab ID: <code>@tab.Name</code></Paragraph>
                                </Div>
                            </Tab>
                        }
                    </Tabs>
                </Div>
                <Div Class="flex flex-wrap gap-2 mt-4">
                    <Button Class="bg-primary text-primary-foreground" Size="ButtonSize.Sm" OnClick="AddDynamicTab">Add Tab</Button>
                    <Button Class="bg-destructive text-destructive-foreground" Size="ButtonSize.Sm" OnClick="RemoveDynamicTab">Remove Last</Button>
                    <Button Class="bg-muted text-muted-foreground" Size="ButtonSize.Sm" OnClick="ClearDynamicTabs">Clear All</Button>
                </Div>
            </DemoSection>
        </section>
    </Div>
</Div>

@code {
    private string _selectedTab = "controlled1";
    private string _dynamicSelectedTab = "";
    private List<DynamicTab> _dynamicTabs = [];
    private int _dynamicTabCounter = 1;
    private bool _setting1;

    public class DynamicTab
    {
        public string Name { get; set; } = "";
        public string Title { get; set; } = "";
    }

    private async Task HandleTabChanged(string tabName)
    {
        _selectedTab = tabName;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleDynamicTabChanged(string tabName)
    {
        _dynamicSelectedTab = tabName;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task GoToFirstTab()
    {
        _selectedTab = "controlled1";
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task GoToSecondTab()
    {
        _selectedTab = "controlled2";
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task GoToThirdTab()
    {
        _selectedTab = "controlled3";
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task AddDynamicTab()
    {
        var newTab = new DynamicTab
        {
            Name = $"dynamic{_dynamicTabCounter}",
            Title = $"Dynamic Tab {_dynamicTabCounter}"
        };
        _dynamicTabs.Add(newTab);
        _dynamicTabCounter++;
        
        if (_dynamicTabs.Count == 1)
        {
            _dynamicSelectedTab = newTab.Name;
        }
        
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task RemoveDynamicTab()
    {
        if (_dynamicTabs.Count > 0)
        {
            DynamicTab lastTab = _dynamicTabs.Last();
            _dynamicTabs.Remove(lastTab);
            
            if (_dynamicSelectedTab == lastTab.Name)
            {
                _dynamicSelectedTab = _dynamicTabs.Count > 0 ? _dynamicTabs.Last().Name : "";
            }
        }
        
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task ClearDynamicTabs()
    {
        _dynamicTabs.Clear();
        _dynamicSelectedTab = "";
        StateHasChanged();
        await Task.CompletedTask;
    }

    protected override void OnInitialized()
    {
        // Initialize with a few dynamic tabs
        _dynamicTabs.Add(new DynamicTab { Name = "dynamic1", Title = "Dynamic Tab 1" });
        _dynamicTabs.Add(new DynamicTab { Name = "dynamic2", Title = "Dynamic Tab 2" });
        _dynamicSelectedTab = "dynamic1";
    }
}
