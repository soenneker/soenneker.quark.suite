@page "/navigation/bars"
@using Microsoft.Extensions.Logging
@inject ILogger<Index> Logger

<PageTitle>Bars - Quark Suite</PageTitle>

<Div Class="space-y-8 max-w-4xl">
    <Div Class="space-y-6">
        <section class="space-y-4">
            <DemoSection Title="Basic navigation bar" Description="Light navbar with brand, toggler, and links." Code="@(@"<HorizontalBar BackgroundColor=""BackgroundColor.Light"">
    <BarBrand To=""#"">Navbar</BarBrand>
    <BarToggler Target=""#navbarNav""/>
    <BarMenu Id=""navbarNav"">
        <BarItem><BarLink To=""#"" Active=""true"">Home</BarLink></BarItem>
        <BarItem><BarLink To=""#"">Features</BarLink></BarItem>
        <BarItem><BarLink To=""#"">Pricing</BarLink></BarItem>
        <BarItem><BarLink To=""#"" Disabled=""true"">Disabled</BarLink></BarItem>
    </BarMenu>
</HorizontalBar>")">
                    <HorizontalBar BackgroundColor="@BackgroundColor.Light">
                        <BarBrand To="#">Navbar</BarBrand>
                        <BarToggler Target="#navbarNav"/>
                        <BarMenu Id="navbarNav">
                            <BarItem>
                                <BarLink To="#" Active="true">Home</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#">Features</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#">Pricing</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#" Disabled="true">Disabled</BarLink>
                            </BarItem>
                        </BarMenu>
                    </HorizontalBar>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Bar alignment" Description="Start, center, and end alignment of bar content." Code="@(@"<HorizontalBar Alignment=""Alignment.Start""><BarBrand To=""#"">Start</BarBrand><BarMenu>...</BarMenu></HorizontalBar>
<HorizontalBar Alignment=""Alignment.Center""><BarBrand To=""#"">Center</BarBrand><BarMenu>...</BarMenu></HorizontalBar>
<HorizontalBar Alignment=""Alignment.End""><BarBrand To=""#"">End</BarBrand><BarMenu>...</BarMenu></HorizontalBar>")">
                <Div Class="space-y-4">
                    <H4 Class="text-sm font-medium text-muted-foreground">Start (default)</H4>
                    <HorizontalBar BackgroundColor="@BackgroundColor.Light" Alignment="Alignment.Start">
                        <BarBrand To="#">Start</BarBrand>
                        <BarMenu>
                            <BarItem>
                                <BarLink To="#">Home</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#">About</BarLink>
                            </BarItem>
                        </BarMenu>
                    </HorizontalBar>

                    <Div>
                        <H4 Class="text-sm font-medium text-muted-foreground">Center</H4>
                        <HorizontalBar BackgroundColor="@BackgroundColor.Light" Alignment="Alignment.Center">
                            <BarBrand To="#">Center</BarBrand>
                            <BarMenu>
                                <BarItem>
                                    <BarLink To="#">Home</BarLink>
                                </BarItem>
                                <BarItem>
                                    <BarLink To="#">About</BarLink>
                                </BarItem>
                            </BarMenu>
                        </HorizontalBar>
                    </Div>

                    <Div>
                        <H4 Class="text-sm font-medium text-muted-foreground">End</H4>
                        <HorizontalBar BackgroundColor="@BackgroundColor.Light" Alignment="Alignment.End">
                            <BarBrand To="#">End</BarBrand>
                            <BarMenu>
                                <BarItem>
                                    <BarLink To="#">Home</BarLink>
                                </BarItem>
                                <BarItem>
                                    <BarLink To="#">About</BarLink>
                                </BarItem>
                            </BarMenu>
                        </HorizontalBar>
                    </Div>
                </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Dark navigation bar" Description="Dark variant with right-aligned menu." Code="@(@"<HorizontalBar BackgroundColor=""BackgroundColor.Dark"" Dark=""true"">
    <BarBrand To=""#"">Dark Navbar</BarBrand>
    <BarToggler Target=""#navbarNav2""/>
    <BarMenu Id=""navbarNav2"">
        <BarItem><BarLink To=""#"" Active=""true"">Home</BarLink></BarItem>
        <BarItem><BarLink To=""#"">About</BarLink></BarItem>
        <BarMenu Right=""true""><BarItem><BarLink To=""#"">Login</BarLink></BarItem></BarMenu>
    </BarMenu>
</HorizontalBar>")">
                    <HorizontalBar BackgroundColor="@BackgroundColor.Dark" Dark="true">
                        <BarBrand To="#">Dark Navbar</BarBrand>
                        <BarToggler Target="#navbarNav2"/>
                        <BarMenu Id="navbarNav2">
                            <BarItem>
                                <BarLink To="#" Active="true">Home</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#">About</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#">Contact</BarLink>
                            </BarItem>
                            <BarMenu Right="true">
                                <BarItem>
                                    <BarLink To="#">Login</BarLink>
                                </BarItem>
                            </BarMenu>
                        </BarMenu>
                    </HorizontalBar>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Transparent bar" Description="Primary bar with transparent background." Code="@(@"<HorizontalBar BackgroundColor=""BackgroundColor.Primary"" Transparent=""true"">
    <BarBrand To=""#"">Transparent</BarBrand>
    <BarMenu>
        <BarItem><BarLink To=""#"">Home</BarLink></BarItem>
        <BarItem><BarLink To=""#"">Services</BarLink></BarItem>
    </BarMenu>
</HorizontalBar>")">
                    <HorizontalBar BackgroundColor="@BackgroundColor.Primary" Transparent="true">
                        <BarBrand To="#">Transparent</BarBrand>
                        <BarMenu>
                            <BarItem>
                                <BarLink To="#">Home</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#">Services</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#">Portfolio</BarLink>
                            </BarItem>
                        </BarMenu>
                    </HorizontalBar>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Fixed top" Description="Bar fixed to the top; content scrolls below." Code="@(@"<HorizontalBar BackgroundColor=""BackgroundColor.Success"" Placement=""BarPlacement.Fixed"">
    <BarBrand To=""#"">Fixed Top</BarBrand>
    <BarMenu>
        <BarItem><BarLink To=""#"">Dashboard</BarLink></BarItem>
        <BarItem><BarLink To=""#"">Reports</BarLink></BarItem>
    </BarMenu>
</HorizontalBar>
<Div Class=""h-[200px] bg-muted mt-[60px] p-5"">Content below fixed navbar</Div>")">
                    <HorizontalBar BackgroundColor="@BackgroundColor.Success" Placement="@BarPlacement.Fixed">
                        <BarBrand To="#">Fixed Top</BarBrand>
                        <BarMenu>
                            <BarItem>
                                <BarLink To="#">Dashboard</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#">Reports</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#">Settings</BarLink>
                            </BarItem>
                        </BarMenu>
                    </HorizontalBar>
                    <Div Class="h-[200px] bg-muted mt-[60px] p-5">
                        <Paragraph Margin="Margin.Is0">Content below fixed navbar</Paragraph>
                    </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Sticky bar" Description="Bar sticks on scroll; content below." Code="@(@"<HorizontalBar BackgroundColor=""BackgroundColor.Warning"" Placement=""BarPlacement.Sticky"">
    <BarBrand To=""#"">Sticky</BarBrand>
    <BarMenu>
        <BarItem><BarLink To=""#"">Products</BarLink></BarItem>
        <BarItem><BarLink To=""#"">Solutions</BarLink></BarItem>
    </BarMenu>
</HorizontalBar>
<Div Class=""h-[200px] bg-muted p-5"">Content that scrolls with sticky navbar</Div>")">
                    <HorizontalBar BackgroundColor="@BackgroundColor.Warning" Placement="@BarPlacement.Sticky">
                        <BarBrand To="#">Sticky</BarBrand>
                        <BarMenu>
                            <BarItem>
                                <BarLink To="#">Products</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#">Solutions</BarLink>
                            </BarItem>
                            <BarItem>
                                <BarLink To="#">Support</BarLink>
                            </BarItem>
                        </BarMenu>
                    </HorizontalBar>
                    <Div Class="h-[200px] bg-muted p-5">
                        <Paragraph Margin="Margin.Is0">Content that scrolls with sticky navbar</Paragraph>
                    </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Vertical sidebar" Description="Vertical bar with BarStart and BarEnd (user at bottom)." Code="@(@"<VerticalBar BackgroundColor=""BackgroundColor.Light"">
    <BarToggler/>
    <BarBrand><BarItem><BarLink To=""#"">My App</BarLink></BarItem></BarBrand>
    <BarStart>
        <BarItem><BarLink To=""#"">Dashboard</BarLink></BarItem>
        <BarItem><BarLink To=""#"">Settings</BarLink></BarItem>
    </BarStart>
    <BarEnd>
        <BarItem><BarLink To=""#"">User</BarLink></BarItem>
    </BarEnd>
</VerticalBar>")">
                    <Div Class="flex h-[500px] border border-border">
                        <VerticalBar BackgroundColor="@BackgroundColor.Light">
                            <BarToggler />
                            <BarBrand>
                                <BarItem>
                                    <BarLink To="#">My App</BarLink>
                                </BarItem>
                            </BarBrand>
                            <BarMenu>
                                <BarStart>
                                    <BarItem>
                                        <BarLink To="#" Active="true">
                                            <BarIcon Name="fa-house" IconStyle="IconStyle.Solid" Class="fa-fw" />
                                            Dashboard
                                        </BarLink>
                                    </BarItem>
                                    <BarItem>
                                        <BarLink To="#">
                                            <BarIcon Name="fa-users" IconStyle="IconStyle.Solid" Class="fa-fw" />
                                            Users
                                        </BarLink>
                                    </BarItem>
                                    <BarItem>
                                        <BarLink To="#">
                                            <BarIcon Name="fa-chart-line" IconStyle="IconStyle.Solid" Class="fa-fw" />
                                            Analytics
                                        </BarLink>
                                    </BarItem>
                                    <BarItem>
                                        <BarLink To="#">
                                            <BarIcon Name="fa-gear" IconStyle="IconStyle.Solid" Class="fa-fw" />
                                            Settings
                                        </BarLink>
                                    </BarItem>
                                    <BarItem>
                                        <BarDropdown>
                                            <BarDropdownToggle>
                                                <BarIcon Name="fa-chevron-down" IconStyle="IconStyle.Solid" Class="fa-fw" />
                                                More Options
                                            </BarDropdownToggle>
                                            <BarDropdownMenu>
                                                <BarDropdownItem To="#">Option 1</BarDropdownItem>
                                                <BarDropdownItem To="#">Option 2</BarDropdownItem>
                                                <BarDropdownItem To="#">Option 3</BarDropdownItem>
                                            </BarDropdownMenu>
                                        </BarDropdown>
                                    </BarItem>
                                </BarStart>
                                <BarEnd>
                                    <BarItem>
                                        <BarDropdown>
                                            <BarDropdownMenu Border="Border.Is1">
                                                <BarDropdownItem To="#" Padding="Padding.Is3.FromStart">
                                                    <BarIcon Name="fa-user" IconStyle="IconStyle.Solid" Margin="Margin.Is2.FromEnd" />
                                                    Profile
                                                </BarDropdownItem>
                                                <BarDropdownItem To="#" Padding="Padding.Is3.FromStart">
                                                    <BarIcon Name="fa-arrow-right-from-bracket" IconStyle="IconStyle.Solid" Margin="Margin.Is2.FromEnd" />
                                                    Log out
                                                </BarDropdownItem>
                                            </BarDropdownMenu>
                                            <BarDropdownToggle Display="Display.Flex" AlignItems="AlignItems.Center">
                                                <BarIcon Name="fa-circle-user" IconStyle="IconStyle.Regular" Margin="Margin.Is2.FromEnd" />
                                                User Name
                                            </BarDropdownToggle>
                                        </BarDropdown>
                                    </BarItem>
                                </BarEnd>
                            </BarMenu>
                        </VerticalBar>
                        <Div Class="flex-1 p-5 bg-muted">
                            <H3 Class="text-lg font-semibold">Main Content Area</H3>
                            <Paragraph Margin="Margin.Is0">
                                Vertical sidebar with user dropdown at the bottom (BarEnd). BarStart holds main nav and fills space.
                            </Paragraph>
                            <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">
                                User dropdown stays at the bottom regardless of nav item count.
                            </Paragraph>
                        </Div>
                    </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Collapsible vertical bar" Description="Toggle expanded/collapsed with the hamburger; BarEnd stays at bottom." Code="@(@"<VerticalBar @ref=""_verticalBarRef"" Collapsible=""true"" BackgroundColor=""BackgroundColor.Light"">
    <BarToggler OnClick=""ToggleVerticalBar""/>
    <BarBrand>...</BarBrand>
    <BarStart>...nav items...</BarStart>
    <BarEnd>...user menu...</BarEnd>
</VerticalBar>")">
                    <Div Class="flex h-[500px] border border-border">
                        <CascadingValue Name="VerticalBarVisible" Value="_sidebarVisible">
                        <CascadingValue Name="VerticalBarVisibleChanged" Value="OnSidebarVisibleChanged">
                        <VerticalBar 
                             CollapseMode="BarCollapseMode.Small" 
                             BackgroundColor="@BackgroundColor.Light">
                            <BarToggler />
                            @if (_sidebarVisible)
                            {
                                <BarBrand>
                                    <BarItem>
                                        <BarLink To="#">Brand</BarLink>
                                    </BarItem>
                                </BarBrand>
                            }
                            <BarMenu>
                                <BarStart>
                                    <BarItem>
                                        <BarLink To="#">
                                            <BarIcon Name="fa-inbox" IconStyle="IconStyle.Solid" Class="fa-fw" />
                                            Inbox
                                        </BarLink>
                                    </BarItem>
                                    <BarItem>
                                        <BarLink To="#">
                                            <BarIcon Name="fa-folder" IconStyle="IconStyle.Solid" Class="fa-fw" />
                                            Files
                                        </BarLink>
                                    </BarItem>
                                    <BarItem>
                                        <BarLink To="#">
                                            <BarIcon Name="fa-calendar" IconStyle="IconStyle.Solid" Class="fa-fw" />
                                            Calendar
                                        </BarLink>
                                    </BarItem>
                                </BarStart>
                                <BarEnd>
                                    <BarItem>
                                        <BarDropdown>
                                            <BarDropdownMenu Border="Border.Is1">
                                                <BarDropdownItem To="#">Settings</BarDropdownItem>
                                                <BarDropdownItem To="#">Help</BarDropdownItem>
                                                <BarDropdownItem To="#">Sign Out</BarDropdownItem>
                                            </BarDropdownMenu>
                                            <BarDropdownToggle>
                                                <BarIcon Name="fa-ellipsis-vertical" IconStyle="IconStyle.Solid" />
                                                @if (_sidebarVisible)
                                                {
                                                    <Text>Menu</Text>
                                                }
                                            </BarDropdownToggle>
                                        </BarDropdown>
                                    </BarItem>
                                </BarEnd>
                            </BarMenu>
                        </VerticalBar>
                        </CascadingValue>
                        </CascadingValue>
                        <Div Class="flex-1 p-5 bg-muted">
                            <H3 Class="text-lg font-semibold">Collapsible Sidebar</H3>
                            <Paragraph Margin="Margin.Is0">
                                Click the hamburger to toggle expanded/collapsed. BarEnd stays at the bottom.
                            </Paragraph>
                        </Div>
                    </Div>
            </DemoSection>
        </section>
    </Div>
</Div>

@code {
    private bool _sidebarVisible = true;

    private async Task OnSidebarVisibleChanged(bool value)
    {
        _sidebarVisible = value;
        await InvokeAsync(StateHasChanged);
    }

    protected override void OnInitialized()
    {
        Logger.LogInformation("Bars demo page initialized");
    }

}
