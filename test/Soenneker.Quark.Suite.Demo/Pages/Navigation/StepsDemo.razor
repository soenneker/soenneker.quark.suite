@page "/navigation/stepsdemo"

<PageTitle>Steps - Quark Suite</PageTitle>

<Div Class="space-y-8 max-w-4xl">
    <Div Class="space-y-3">
        <H1 Class="text-4xl font-bold tracking-tight">Steps</H1>
        <Paragraph Class="text-xl text-muted-foreground" Margin="Margin.Is0">Multi-step workflows with navigation, validation, and custom content.</Paragraph>
    </Div>

    <Div Class="space-y-6">
        <section class="space-y-4">
            <DemoSection Title="Basic steps" Description="@($"Three steps with Previous/Next; current step {_currentStep}.")">
        <Steps @ref="_basicStepsRef" @bind-SelectedStep="_currentStep" BackgroundColor="@("#FFFFFF")">
            <Step Name="step1">
                <StepMarker>
                    <Span>1</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Step 1</Div>
                </StepCaption>
            </Step>
            <Step Name="step2">
                <StepMarker>
                    <Span>2</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Step 2</Div>
                </StepCaption>
            </Step>
            <Step Name="step3">
                <StepMarker>
                    <Span>3</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Step 3</Div>
                </StepCaption>
            </Step>

            <StepContent>
                <StepPanel Name="step1">
                    <Paragraph>This is the content for step 1.</Paragraph>
                    <Paragraph>You can put any content here, including forms, text, or other components.</Paragraph>
                </StepPanel>
                <StepPanel Name="step2">
                    <Paragraph>This is the content for step 2.</Paragraph>
                    <Paragraph>Each step can have different content and functionality.</Paragraph>
                </StepPanel>
                <StepPanel Name="step3">
                    <Paragraph>This is the content for step 3.</Paragraph>
                    <Paragraph>This is the final step in the process.</Paragraph>
                </StepPanel>
            </StepContent>
        </Steps>

        <Div Class="flex flex-wrap gap-2 items-center mt-4">
            <Button Class="bg-primary text-primary-foreground" OnClick="PreviousStep">Previous</Button>
            <Button Class="bg-primary text-primary-foreground" OnClick="NextStep">Next</Button>
            <Text Class="text-muted-foreground" Margin="Margin.Is0">Current Step: @_currentStep</Text>
        </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Steps with validation" Description="Personal â†’ Contact â†’ Review with form fields.">
        <Steps @ref="_validationStepsRef" @bind-SelectedStep="_currentValidationStep">
            <Step Name="personal">
                <StepMarker>
                    <Span>1</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Personal Information</Div>
                </StepCaption>
            </Step>
            <Step Name="contact">
                <StepMarker>
                    <Span>2</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Contact Information</Div>
                </StepCaption>
            </Step>
            <Step Name="review">
                <StepMarker>
                    <Span>3</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Review & Submit</Div>
                </StepCaption>
            </Step>

            <StepContent>
                <StepPanel Name="personal">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Label For="firstName" Form="true">First Name</Label>
                        <TextEdit Id="firstName" @bind-Value="_personalInfo.FirstName"/>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Label For="lastName" Form="true">Last Name</Label>
                        <TextEdit Id="lastName" @bind-Value="_personalInfo.LastName"/>
                    </Div>
                </StepPanel>
                <StepPanel Name="contact">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Label For="email" Form="true">Email</Label>
                        <TextEdit Id="email" Type="email" @bind-Value="_personalInfo.Email"/>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Label For="phone" Form="true">Phone</Label>
                        <TextEdit Id="phone" Type="tel" @bind-Value="_personalInfo.Phone"/>
                    </Div>
                </StepPanel>
                <StepPanel Name="review">
                    <H4>Review Your Information</H4>
                    <Paragraph>
                        <Strong>Name:</Strong> @_personalInfo.FirstName @_personalInfo.LastName
                    </Paragraph>
                    <Paragraph>
                        <Strong>Email:</Strong> @_personalInfo.Email
                    </Paragraph>
                    <Paragraph>
                        <Strong>Phone:</Strong> @_personalInfo.Phone
                    </Paragraph>

                    <Div Margin="Margin.Is3.FromTop">
                        <Button BackgroundColor="@BackgroundColor.Success" OnClick="SubmitForm">Submit</Button>
                    </Div>
                </StepPanel>
            </StepContent>
        </Steps>

        <Div Class="flex gap-2 mt-4">
            <Button Class="bg-secondary text-secondary-foreground" OnClick="PreviousValidationStep">Previous</Button>
            <Button Class="bg-primary text-primary-foreground" OnClick="NextValidationStep">Next</Button>
        </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Custom content" Description="Emoji markers and phase titles (Design, Development, Testing, Deployment).">
        <Steps @ref="_styledStepsRef" @bind-SelectedStep="_currentStyledStep">
            <Step Name="design">
                <StepMarker>
                    <Span>ðŸŽ¨</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Design</Div>
                </StepCaption>
            </Step>
            <Step Name="develop">
                <StepMarker>
                    <Span>ðŸ’»</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Development</Div>
                </StepCaption>
            </Step>
            <Step Name="test">
                <StepMarker>
                    <Span>ðŸ§ª</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Testing</Div>
                </StepCaption>
            </Step>
            <Step Name="deploy">
                <StepMarker>
                    <Span>ðŸš€</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Deployment</Div>
                </StepCaption>
            </Step>

            <StepContent>
                <StepPanel Name="design">
                    <H4 Class="text-foreground font-semibold">Design Phase</H4>
                    <Paragraph>Create the visual design and user interface.</Paragraph>
                    <UnorderedList>
                        <UnorderedListItem>Wireframes</UnorderedListItem>
                        <UnorderedListItem>Mockups</UnorderedListItem>
                        <UnorderedListItem>Prototypes</UnorderedListItem>
                    </UnorderedList>
                </StepPanel>
                <StepPanel Name="develop">
                    <H4 Class="text-foreground font-semibold">Development Phase</H4>
                    <Paragraph>Implement the design into working code.</Paragraph>
                    <UnorderedList>
                        <UnorderedListItem>Frontend Development</UnorderedListItem>
                        <UnorderedListItem>Backend Development</UnorderedListItem>
                        <UnorderedListItem>Database Design</UnorderedListItem>
                    </UnorderedList>
                </StepPanel>
                <StepPanel Name="test">
                    <H4 Class="text-foreground font-semibold">Testing Phase</H4>
                    <Paragraph>Test the application for bugs and performance.</Paragraph>
                    <UnorderedList>
                        <UnorderedListItem>Unit Testing</UnorderedListItem>
                        <UnorderedListItem>Integration Testing</UnorderedListItem>
                        <UnorderedListItem>User Acceptance Testing</UnorderedListItem>
                    </UnorderedList>
                </StepPanel>
                <StepPanel Name="deploy">
                    <H4 Class="text-foreground font-semibold">Deployment Phase</H4>
                    <Paragraph>Deploy the application to production.</Paragraph>
                    <UnorderedList>
                        <UnorderedListItem>Production Setup</UnorderedListItem>
                        <UnorderedListItem>Monitoring</UnorderedListItem>
                        <UnorderedListItem>Documentation</UnorderedListItem>
                    </UnorderedList>
                </StepPanel>
            </StepContent>
        </Steps>

        <Div Class="flex flex-wrap gap-2 items-center mt-4">
            <Button Class="bg-primary text-primary-foreground" OnClick="PreviousStyledStep">Previous</Button>
            <Button Class="bg-primary text-primary-foreground" OnClick="NextStyledStep">Next</Button>
            <Text Class="text-muted-foreground" Margin="Margin.Is0">Current Phase: @_currentStyledStep</Text>
        </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Steps with navigation" Description="Account â†’ Profile â†’ Preferences with Complete Setup.">
        <Steps @ref="_navigationStepsRef" @bind-SelectedStep="_currentNavigationStep">
            <Step Name="account">
                <StepMarker>
                    <Span>1</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Create Account</Div>
                </StepCaption>
            </Step>
            <Step Name="profile">
                <StepMarker>
                    <Span>2</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Profile Setup</Div>
                </StepCaption>
            </Step>
            <Step Name="preferences">
                <StepMarker>
                    <Span>3</Span>
                </StepMarker>
                <StepCaption>
                    <Div Class="step-title">Preferences</Div>
                </StepCaption>
            </Step>

            <StepContent>
                <StepPanel Name="account">
                    <H4>Account Creation</H4>
                    <Paragraph>Create your account to get started.</Paragraph>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Label For="username" Form="true">Username</Label>
                        <TextEdit Id="username" @bind-Value="_accountInfo.Username"/>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Label For="password" Form="true">Password</Label>
                        <TextEdit Id="password" Type="password" @bind-Value="_accountInfo.Password"/>
                    </Div>
                </StepPanel>
                <StepPanel Name="profile">
                    <H4>Profile Information</H4>
                    <Paragraph>Tell us about yourself.</Paragraph>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Label For="bio" Form="true">Bio</Label>
                        <MemoEdit Id="bio" @bind-Value="_accountInfo.Bio" Rows="3"/>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Label For="website" Form="true">Website</Label>
                        <TextEdit Id="website" Type="url" @bind-Value="_accountInfo.Website"/>
                    </Div>
                </StepPanel>
                <StepPanel Name="preferences">
                    <H4>Account Preferences</H4>
                    <Paragraph>Configure your account preferences.</Paragraph>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Check @bind-Checked="_accountInfo.EmailNotifications"/> Email Notifications
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Check @bind-Checked="_accountInfo.SmsNotifications"/> SMS Notifications
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Label For="language" Form="true">Language</Label>
                        <Select Id="language" @bind-SelectedValue="_accountInfo.Language">
                            <SelectItem Value="@("english")">English</SelectItem>
                            <SelectItem Value="@("spanish")">Spanish</SelectItem>
                            <SelectItem Value="@("french")">French</SelectItem>
                        </Select>
                    </Div>
                </StepPanel>
            </StepContent>
        </Steps>

        <Div Class="flex flex-wrap gap-2 mt-4">
            <Button Class="bg-secondary text-secondary-foreground" OnClick="PreviousNavigationStep">Previous</Button>
            <Button Class="bg-primary text-primary-foreground" OnClick="NextNavigationStep">Next</Button>
            <Button Class="bg-primary text-primary-foreground" OnClick="CompleteSetup">Complete Setup</Button>
        </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Steps features" Description="Overview of component structure and capabilities.">
                <Div Class="rounded-lg border border-border bg-muted/50 p-4">
                    <H3 Class="text-lg font-semibold">Steps Features</H3>
                    <Paragraph Margin="Margin.Is0">Steps components provide guided workflow functionality:</Paragraph>
                    <UnorderedList>
                        <UnorderedListItem><Strong>Steps:</Strong> Main container for the step workflow</UnorderedListItem>
                        <UnorderedListItem><Strong>Step:</Strong> Individual step with title and content</UnorderedListItem>
                        <UnorderedListItem><Strong>StepContent:</Strong> Content area within each step</UnorderedListItem>
                        <UnorderedListItem><Strong>StepPanel:</Strong> Panel wrapper for step content</UnorderedListItem>
                        <UnorderedListItem><Strong>Navigation:</Strong> Built-in navigation between steps</UnorderedListItem>
                        <UnorderedListItem><Strong>Validation:</Strong> Support for step validation</UnorderedListItem>
                        <UnorderedListItem><Strong>Customization:</Strong> Custom styling and behavior</UnorderedListItem>
                        <UnorderedListItem><Strong>Events:</Strong> Step change and completion events</UnorderedListItem>
                    </UnorderedList>
                </Div>
            </DemoSection>
        </section>
    </Div>
</Div>

@code {
    private Steps? _basicStepsRef;
    private Steps? _validationStepsRef;
    private Steps? _styledStepsRef;
    private Steps? _navigationStepsRef;

    private string _currentStep = "step1";
    private string _currentValidationStep = "personal";
    private string _currentStyledStep = "design";
    private string _currentNavigationStep = "account";

    private PersonalInfo _personalInfo = new();
    private AccountInfo _accountInfo = new();

    private async Task NextStep(MouseEventArgs e)
    {
        if (_basicStepsRef != null)
        {
            await _basicStepsRef.NextStep();
        }
    }

    private async Task PreviousStep(MouseEventArgs e)
    {
        if (_basicStepsRef != null)
        {
            await _basicStepsRef.PreviousStep();
        }
    }

    private async Task NextValidationStep(MouseEventArgs e)
    {
        if (_validationStepsRef != null)
        {
            await _validationStepsRef.NextStep();
        }
    }

    private async Task PreviousValidationStep(MouseEventArgs e)
    {
        if (_validationStepsRef != null)
        {
            await _validationStepsRef.PreviousStep();
        }
    }

    private async Task NextStyledStep(MouseEventArgs e)
    {
        if (_styledStepsRef != null)
        {
            await _styledStepsRef.NextStep();
        }
    }

    private async Task PreviousStyledStep(MouseEventArgs e)
    {
        if (_styledStepsRef != null)
        {
            await _styledStepsRef.PreviousStep();
        }
    }

    private async Task NextNavigationStep(MouseEventArgs e)
    {
        if (_navigationStepsRef != null)
        {
            await _navigationStepsRef.NextStep();
        }
    }

    private async Task PreviousNavigationStep(MouseEventArgs e)
    {
        if (_navigationStepsRef != null)
        {
            await _navigationStepsRef.PreviousStep();
        }
    }

    private void SubmitForm(MouseEventArgs e)
    {
        // Handle form submission
        StateHasChanged();
    }

    private void CompleteSetup(MouseEventArgs e)
    {
        // Handle account setup completion
        StateHasChanged();
    }

    public class PersonalInfo
    {
        public string FirstName { get; set; } = string.Empty;
        public string LastName { get; set; } = string.Empty;
        public string Email { get; set; } = string.Empty;
        public string Phone { get; set; } = string.Empty;
    }

    public class AccountInfo
    {
        public string Username { get; set; } = string.Empty;
        public string Password { get; set; } = string.Empty;
        public string Bio { get; set; } = string.Empty;
        public string Website { get; set; } = string.Empty;
        public bool EmailNotifications { get; set; } = true;
        public bool SmsNotifications { get; set; } = false;
        public string Language { get; set; } = "en";
    }

    protected override void OnInitialized()
    {
    }

}
