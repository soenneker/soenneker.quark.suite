@page "/forms/selects"
@using System.ComponentModel.DataAnnotations
@using Microsoft.AspNetCore.Components.Forms

<PageTitle>Select Component - Quark Suite</PageTitle>

<div class="space-y-8 max-w-4xl">
    <section class="space-y-4">
        <DemoSection Title="Basic Select" Description="A simple select with a list of options." Code="@(@"<Select TValue=""string"" @bind-SelectedValue=""_selectedFruit"" DefaultItemText=""Select a fruit..."">
    <SelectItem TValue=""string"" Value=""apple"" Text=""Apple"" />
    <SelectItem TValue=""string"" Value=""banana"" Text=""Banana"" />
    <SelectItem TValue=""string"" Value=""blueberry"" Text=""Blueberry"" />
    <SelectItem TValue=""string"" Value=""grapes"" Text=""Grapes"" />
    <SelectItem TValue=""string"" Value=""pineapple"" Text=""Pineapple"" />
</Select>")">
            <div class="flex items-center gap-4">
                <Select TValue="string" @bind-SelectedValue="_selectedFruit" DefaultItemText="Select a fruit...">
                    <SelectItem TValue="string" Value="@("apple")" Text="Apple" />
                    <SelectItem TValue="string" Value="@("banana")" Text="Banana" />
                    <SelectItem TValue="string" Value="@("blueberry")" Text="Blueberry" />
                    <SelectItem TValue="string" Value="@("grapes")" Text="Grapes" />
                    <SelectItem TValue="string" Value="@("pineapple")" Text="Pineapple" />
                </Select>
                @if (!string.IsNullOrEmpty(_selectedFruit))
                {
                    <p class="text-sm">Selected: <strong>@_selectedFruit</strong></p>
                }
            </div>
        </DemoSection>
    </section>

    <section class="space-y-4">
        <DemoSection Title="Grouped Options" Description="Organize related items into labeled groups." Code="@(@"<Select TValue=""string"" @bind-SelectedValue=""_selectedAnimal"" DefaultItemText=""Select an animal..."">
    <SelectGroup Label=""Mammals"">
        <SelectItem TValue=""string"" Value=""cat"" Text=""Cat"" />
        <SelectItem TValue=""string"" Value=""dog"" Text=""Dog"" />
        <SelectItem TValue=""string"" Value=""elephant"" Text=""Elephant"" />
    </SelectGroup>
    <SelectGroup Label=""Birds"">
        <SelectItem TValue=""string"" Value=""eagle"" Text=""Eagle"" />
        <SelectItem TValue=""string"" Value=""parrot"" Text=""Parrot"" />
        <SelectItem TValue=""string"" Value=""penguin"" Text=""Penguin"" />
    </SelectGroup>
</Select>")">
            <div class="flex items-center gap-4">
                <Select TValue="string" @bind-SelectedValue="_selectedAnimal" DefaultItemText="Select an animal...">
                    <SelectGroup Label="Mammals">
                        <SelectItem TValue="string" Value="@("cat")" Text="Cat" />
                        <SelectItem TValue="string" Value="@("dog")" Text="Dog" />
                        <SelectItem TValue="string" Value="@("elephant")" Text="Elephant" />
                    </SelectGroup>
                    <SelectGroup Label="Birds">
                        <SelectItem TValue="string" Value="@("eagle")" Text="Eagle" />
                        <SelectItem TValue="string" Value="@("parrot")" Text="Parrot" />
                        <SelectItem TValue="string" Value="@("penguin")" Text="Penguin" />
                    </SelectGroup>
                </Select>
                @if (!string.IsNullOrEmpty(_selectedAnimal))
                {
                    <p class="text-sm">Selected: <strong>@_selectedAnimal</strong></p>
                }
            </div>
        </DemoSection>
    </section>

    <section class="space-y-4">
        <DemoSection Title="Scrollable Long List" Description="Handle many options with native select scrolling." Code="@(@"<Select TValue=""string"" @bind-SelectedValue=""_selectedCountry"" DefaultItemText=""Select a country..."">
    @foreach (var country in _countries) {
        <SelectItem TValue=""string"" Value=""@country"" Text=""@country"" />
    }
</Select>")">
            <div class="flex items-center gap-4">
                <Select TValue="string" @bind-SelectedValue="_selectedCountry" DefaultItemText="Select a country...">
                    @foreach (var country in _countries)
                    {
                        <SelectItem TValue="string" Value="@country" Text="@country" />
                    }
                </Select>
                @if (!string.IsNullOrEmpty(_selectedCountry))
                {
                    <p class="text-sm">Selected: <strong>@_selectedCountry</strong></p>
                }
            </div>
        </DemoSection>
    </section>

    <section class="space-y-4">
        <DemoSection Title="Generic Type Support" Description="Select supports generic values, including numbers." Code="@(@"<Select TValue=""int"" @bind-SelectedValue=""_selectedNumber"" DefaultItemText=""Select a number..."">
    <SelectItem TValue=""int"" Value=""1"" Text=""One"" />
    <SelectItem TValue=""int"" Value=""2"" Text=""Two"" />
    <SelectItem TValue=""int"" Value=""3"" Text=""Three"" />
    <SelectItem TValue=""int"" Value=""4"" Text=""Four"" />
    <SelectItem TValue=""int"" Value=""5"" Text=""Five"" />
</Select>")">
            <div class="flex items-center gap-4">
                <Select TValue="int" @bind-SelectedValue="_selectedNumber" DefaultItemText="Select a number...">
                    <SelectItem TValue="int" Value="1" Text="One" />
                    <SelectItem TValue="int" Value="2" Text="Two" />
                    <SelectItem TValue="int" Value="3" Text="Three" />
                    <SelectItem TValue="int" Value="4" Text="Four" />
                    <SelectItem TValue="int" Value="5" Text="Five" />
                </Select>
                @if (_selectedNumber > 0)
                {
                    <p class="text-sm">Selected: <strong>@_selectedNumber</strong></p>
                }
            </div>
        </DemoSection>
    </section>

    <section class="space-y-4">
        <DemoSection Title="Form Validation" Description="Select integrated with EditForm and validation messaging." Code="@(@"<EditForm Model=""_formModel"" OnValidSubmit=""HandleSubmit"" class=""max-w-md space-y-4"">
    <DataAnnotationsValidator />
    <label class=""text-sm font-medium"">Favorite Fruit</label>
    <Select TValue=""string"" @bind-SelectedValue=""_formModel.Fruit"" DefaultItemText=""Select a fruit..."">
        <SelectItem TValue=""string"" Value=""apple"" Text=""Apple"" />
        <SelectItem TValue=""string"" Value=""banana"" Text=""Banana"" />
        <SelectItem TValue=""string"" Value=""blueberry"" Text=""Blueberry"" />
    </Select>
    <ValidationMessage For=""@(() => _formModel.Fruit)"" class=""text-sm text-destructive"" />
    <Button Type=""ButtonType.Submit"" Variant=""ButtonVariant.Default"">Submit</Button>
</EditForm>")">
            <EditForm Model="_formModel" OnValidSubmit="HandleSubmit" class="max-w-md space-y-4">
                <DataAnnotationsValidator />
                <div class="space-y-2">
                    <label class="text-sm font-medium">Favorite Fruit</label>
                    <Select TValue="string" @bind-SelectedValue="_formModel.Fruit" DefaultItemText="Select a fruit...">
                        <SelectItem TValue="string" Value="@("apple")" Text="Apple" />
                        <SelectItem TValue="string" Value="@("banana")" Text="Banana" />
                        <SelectItem TValue="string" Value="@("blueberry")" Text="Blueberry" />
                    </Select>
                    <ValidationMessage For="@(() => _formModel.Fruit)" class="text-sm text-destructive" />
                </div>
                <div class="flex gap-4">
                    <Button Type="@ButtonType.Submit" Variant="ButtonVariant.Default">Submit</Button>
                    <Button Type="@ButtonType.Button" Variant="ButtonVariant.Outline" OnClick="@(_ => ResetForm())">Reset</Button>
                </div>
                @if (!string.IsNullOrEmpty(_formMessage))
                {
                    <div class="p-4 bg-card rounded-lg border">
                        <p class="text-sm">@_formMessage</p>
                    </div>
                }
            </EditForm>
        </DemoSection>
    </section>
</div>

@code {
    private string? _selectedFruit;
    private string? _selectedAnimal;
    private string? _selectedCountry;
    private int _selectedNumber;

    private readonly string[] _countries =
    {
        "Afghanistan", "Albania", "Algeria", "Andorra", "Angola",
        "Argentina", "Armenia", "Australia", "Austria", "Azerbaijan",
        "Bahamas", "Bahrain", "Bangladesh", "Barbados", "Belarus",
        "Belgium", "Belize", "Benin", "Bhutan", "Bolivia",
        "Brazil", "Bulgaria", "Canada", "Chile", "China",
        "Colombia", "Croatia", "Czech Republic", "Denmark", "Egypt"
    };

    private SelectFormModel _formModel = new();
    private string? _formMessage;

    private void HandleSubmit()
    {
        _formMessage = $"Submitted! Fruit: {_formModel.Fruit}";
    }

    private void ResetForm()
    {
        _formModel = new();
        _formMessage = null;
    }

    private sealed class SelectFormModel
    {
        [Required(ErrorMessage = "Please select a fruit.")]
        public string? Fruit { get; set; }
    }
}
