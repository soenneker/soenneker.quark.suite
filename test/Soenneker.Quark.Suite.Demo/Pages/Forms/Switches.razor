@page "/forms/switches"

<PageTitle>Switches - Quark Suite</PageTitle>

<Div Class="space-y-8 max-w-4xl">
    <Div Class="space-y-6">
        <section class="space-y-4">
            <!-- Binding Test Section -->
            <DemoSection Title="Binding test" Description="Toggle switches below or click 'Load Test Data' to verify binding works." Code="@(@"<Switch @bind-Checked=""_testSwitch1"">Test Switch 1</Switch>
<Switch @bind-Checked=""_testSwitch2"">Test Switch 2 (Pre-enabled)</Switch>
<Button OnClick=""LoadSwitchTestData"">Load Test Data (Enable All)</Button>")">
                <Div Class="p-4 rounded-lg border border-border bg-muted/30 space-y-4">
                    <H3 Class="text-lg font-semibold" Margin="Margin.Is0.FromBottom">Two-Way Binding</H3>

                    <Div Margin="Margin.Is3.FromBottom">
                        <Switch @bind-Checked="_testSwitch1">
                            Test Switch 1
                        </Switch>
                        <Div Margin="Margin.Is2.FromTop" Padding="Padding.Is2" Class="rounded border border-border bg-background">
                            <Strong>Bound Value:</Strong> <Code>@_testSwitch1</Code>
                        </Div>
                    </Div>

                    <Div Margin="Margin.Is3.FromBottom">
                        <Switch @bind-Checked="_testSwitch2">
                            Test Switch 2 (Pre-enabled)
                        </Switch>
                        <Div Margin="Margin.Is2.FromTop" Padding="Padding.Is2" Class="rounded border border-border bg-background">
                            <Strong>Bound Value:</Strong> <Code>@_testSwitch2</Code>
                        </Div>
                    </Div>

                    <Div Class="flex flex-wrap gap-2 mt-4">
                        <Button Class="bg-primary text-primary-foreground" OnClick="LoadSwitchTestData">Load Test Data (Enable All)</Button>
                        <Button Class="bg-secondary text-secondary-foreground" OnClick="ClearSwitchTestData">Clear Test Data (Disable All)</Button>
                        <Button Class="bg-muted text-muted-foreground" OnClick="ToggleSwitchTestData">Toggle Values</Button>
                    </Div>

                    <Div Class="mt-4 p-3 rounded-lg border border-border bg-muted/30">
                        <H4 Class="text-sm font-semibold">Test Results:</H4>
                        <UnorderedList Margin="Margin.Is0.FromBottom">
                            <UnorderedListItem><Strong>Switch 1:</Strong> @_testSwitch1</UnorderedListItem>
                            <UnorderedListItem><Strong>Switch 2:</Strong> @_testSwitch2</UnorderedListItem>
                        </UnorderedList>
                    </Div>
                </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="ChildContent Support" Description="Use ChildContent for rich labels or the Label property for simple text." Code="@(@"<Switch @bind-Checked=""isEnabled"">
    Enable notifications
</Switch>
<Switch @bind-Checked=""isEnabled"">
    Dark mode with <Strong>bold text</Strong>
</Switch>")">
                    <Row>
                        <Column ColumnSize="ColumnSize.Is6.OnXl">
                            <H5>Using ChildContent</H5>
                            <Switch @bind-Checked="_childContentChecked">
                                Enable notifications
                            </Switch>
                            <Switch @bind-Checked="_childContentChecked2">
                                Dark mode with <Strong>bold text</Strong>
                            </Switch>
                            <Paragraph TextColor="TextColor.Muted" Margin="Margin.Is2.FromTop">ChildContent allows rich content inside switches</Paragraph>
                        </Column>
                        <Column ColumnSize="ColumnSize.Is6.OnXl">
                            <H5>Using Label (Legacy)</H5>
                            <Switch Label="Enable notifications" @bind-Checked="_labelChecked" />
                            <Paragraph TextColor="TextColor.Muted" Margin="Margin.Is2.FromTop">The Label property is still supported for backward compatibility</Paragraph>
                        </Column>
                    </Row>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Basic Switches" Description="Simple switch with ChildContent or without a label." Code="@(@"<Switch @bind-Checked=""isEnabled"">Enable notifications</Switch>
<Switch @bind-Checked=""noLabel"" />")">
                    <Row>
                        <Column ColumnSize="ColumnSize.Is6.OnXl">
                            <H5>Simple Switch</H5>
                            <Switch @bind-Checked="_basicChecked">
                                Enable notifications
                            </Switch>
                            <Paragraph TextColor="TextColor.Muted" Margin="Margin.Is2.FromTop">Status: @(_basicChecked ? "Enabled" : "Disabled")</Paragraph>
                        </Column>
                        <Column ColumnSize="ColumnSize.Is6.OnXl">
                            <H5>Switch without Label</H5>
                            <Switch @bind-Checked="_noLabelChecked" />
                            <Paragraph TextColor="TextColor.Muted" Margin="Margin.Is2.FromTop">Status: @(_noLabelChecked ? "On" : "Off")</Paragraph>
                        </Column>
                    </Row>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Color Variants" Description="BackgroundColor for semantic switch styling." Code="@(@"<Switch BackgroundColor=""BackgroundColor.Primary"" @bind-Checked=""value"">Primary</Switch>
<Switch BackgroundColor=""BackgroundColor.Success"" @bind-Checked=""value"">Success</Switch>
<Switch BackgroundColor=""BackgroundColor.Danger"" @bind-Checked=""value"">Danger</Switch>")">
                    <Row>
                        <Column ColumnSize="ColumnSize.Is4.OnXl">
                            <H6>Primary</H6>
                            <Switch BackgroundColor="BackgroundColor.Primary" @bind-Checked="_primaryChecked">
                                Primary Switch
                            </Switch>
                        </Column>
                        <Column ColumnSize="ColumnSize.Is4.OnXl">
                            <H6>Secondary</H6>
                            <Switch BackgroundColor="BackgroundColor.Secondary" @bind-Checked="_secondaryChecked">
                                Secondary Switch
                            </Switch>
                        </Column>
                        <Column ColumnSize="ColumnSize.Is4.OnXl">
                            <H6>Success</H6>
                            <Switch BackgroundColor="BackgroundColor.Success" @bind-Checked="_successChecked">
                                Success Switch
                            </Switch>
                        </Column>
                    </Row>
                    <Row Margin="Margin.Is3.FromTop">
                        <Column ColumnSize="ColumnSize.Is4.OnXl">
                            <H6>Danger</H6>
                            <Switch BackgroundColor="BackgroundColor.Danger" @bind-Checked="_dangerChecked">
                                Danger Switch
                            </Switch>
                        </Column>
                        <Column ColumnSize="ColumnSize.Is4.OnXl">
                            <H6>Warning</H6>
                            <Switch BackgroundColor="BackgroundColor.Warning" @bind-Checked="_warningChecked">
                                Warning Switch
                            </Switch>
                        </Column>
                        <Column ColumnSize="ColumnSize.Is4.OnXl">
                            <H6>Info</H6>
                            <Switch BackgroundColor="BackgroundColor.Info" @bind-Checked="_infoChecked">
                                Info Switch
                            </Switch>
                        </Column>
                    </Row>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Size Variants" Description="Size.Small, Default, Large." Code="@(@"<Switch Label=""Small Switch"" Size=""Size.Small"" @bind-Checked=""value""/>
<Switch Label=""Default Switch"" Size=""Size.Default"" @bind-Checked=""value""/>
<Switch Label=""Large Switch"" Size=""Size.Large"" @bind-Checked=""value""/>")">
                    <Row>
                        <Column ColumnSize="ColumnSize.Is4.OnXl">
                            <H6>Small</H6>
                            <Switch Label="Small Switch" Size="Size.Small" @bind-Checked="_smallChecked" />
                        </Column>
                        <Column ColumnSize="ColumnSize.Is4.OnXl">
                            <H6>Default</H6>
                            <Switch Label="Default Switch" Size="Size.Default" @bind-Checked="_defaultChecked" />
                        </Column>
                        <Column ColumnSize="ColumnSize.Is4.OnXl">
                            <H6>Large</H6>
                            <Switch Label="Large Switch" Size="Size.Large" @bind-Checked="_largeChecked" />
                        </Column>
                    </Row>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Disabled State" Description="Disabled switches (checked or unchecked)." Code="@(@"<Switch Label=""Disabled unchecked"" Disabled=""true"" Checked=""false""/>
<Switch Label=""Disabled checked"" Disabled=""true"" Checked=""true""/>")">
                    <Row>
                        <Column ColumnSize="ColumnSize.Is6.OnXl">
                            <H6>Disabled (Unchecked)</H6>
                            <Switch Label="This switch is disabled" Disabled="true" Checked="false" />
                        </Column>
                        <Column ColumnSize="ColumnSize.Is6.OnXl">
                            <H6>Disabled (Checked)</H6>
                            <Switch Label="This switch is disabled and checked" Disabled="true" Checked="true" />
                        </Column>
                    </Row>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Event Handling" Description="OnClick and OnChange event handlers." Code="@(@"<Switch Label=""Click me"" @bind-Checked=""value"" OnClick=""OnSwitchClick""/>
<Switch Label=""Change me"" @bind-Checked=""value"" OnChange=""OnSwitchChange""/>")">
                    <Row>
                        <Column ColumnSize="ColumnSize.Is6.OnXl">
                            <H6>Click Events</H6>
                            <Switch Label="Click me to see events" @bind-Checked="_eventChecked" OnClick="OnSwitchClick" />
                            <Paragraph TextColor="TextColor.Muted" Margin="Margin.Is2.FromTop">Click count: @_clickCount</Paragraph>
                        </Column>
                        <Column ColumnSize="ColumnSize.Is6.OnXl">
                            <H6>Change Events</H6>
                            <Switch Label="Change me to see events" @bind-Checked="_changeChecked" OnChange="OnSwitchChange" />
                            <Paragraph TextColor="TextColor.Muted" Margin="Margin.Is2.FromTop">Last change: @_lastChangeEvent</Paragraph>
                        </Column>
                    </Row>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Form Integration" Description="Switches in forms with bind-Checked." Code="@(@"<form>
    <Switch Label=""Email notifications"" @bind-Checked=""data.EmailNotifications""/>
    <Switch Label=""SMS notifications"" @bind-Checked=""data.SmsNotifications""/>
    <Button OnClick=""SubmitForm"">Submit</Button>
</form>")">
                    <form>
                        <Div Margin="Margin.Is3.FromBottom">
                            <H6>User Preferences</H6>
                            <Switch Label="Email notifications" @bind-Checked="_formData.EmailNotifications" />
                            <Switch Label="SMS notifications" @bind-Checked="_formData.SmsNotifications" />
                            <Switch Label="Marketing emails" @bind-Checked="_formData.MarketingEmails" />
                        </Div>
                        <Button BackgroundColor="BackgroundColor.Primary" OnClick="SubmitForm">Submit Preferences</Button>
                    </form>
                    <Div Margin="Margin.Is3.FromTop">
                        <H6>Form Data:</H6>
                        <Div ElementType="ElementType.Pre" BackgroundColor="BackgroundColor.Light" Padding="Padding.Is2" BorderRadius="BorderRadius.Default">@GetFormDataJson()</Div>
                    </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Interactive Demo" Description="Master switch controlling disabled child switches." Code="@(@"<Switch Label=""Toggle all"" @bind-Checked=""_masterSwitch""/>
<Switch Label=""Option 1"" Checked=""_masterSwitch"" Disabled=""true""/>")">
                    <Row>
                        <Column ColumnSize="ColumnSize.Is6.OnXl">
                            <H6>Master Switch</H6>
                            <Switch Label="Toggle all switches" @bind-Checked="_masterSwitch" />
                        </Column>
                        <Column ColumnSize="ColumnSize.Is6.OnXl">
                            <H6>Controlled Switches</H6>
                            <Switch Label="Option 1" Checked="_masterSwitch" Disabled="true" />
                            <Switch Label="Option 2" Checked="_masterSwitch" Disabled="true" />
                            <Switch Label="Option 3" Checked="_masterSwitch" Disabled="true" />
                        </Column>
                    </Row>
            </DemoSection>
        </section>
    </Div>
</Div>

@code {
    // Binding Test Fields
    private bool _testSwitch1;
    private bool _testSwitch2 = true;

    // ChildContent examples
    private bool _childContentChecked;
    private bool _childContentChecked2 = true;
    private bool _labelChecked;

    // Basic switches
    private bool _basicChecked;
    private bool _noLabelChecked = true;

    // Color variants
    private bool _primaryChecked;
    private bool _secondaryChecked = true;
    private bool _successChecked;
    private bool _dangerChecked = true;
    private bool _warningChecked;
    private bool _infoChecked = true;

    // Size variants
    private bool _smallChecked;
    private bool _defaultChecked = true;
    private bool _largeChecked;

    // Event handling
    private bool _eventChecked;
    private bool _changeChecked;
    private int _clickCount;
    private string _lastChangeEvent = "No changes yet";

    // Form data
    private UserPreferences _formData = new();

    // Interactive demo
    private bool _masterSwitch;

    private void LoadSwitchTestData()
    {
        _testSwitch1 = true;
        _testSwitch2 = true;
    }
    
    private void ClearSwitchTestData()
    {
        _testSwitch1 = false;
        _testSwitch2 = false;
    }
    
    private void ToggleSwitchTestData()
    {
        _testSwitch1 = !_testSwitch1;
        _testSwitch2 = !_testSwitch2;
    }

    private void OnSwitchClick(MouseEventArgs e)
    {
        _clickCount++;
        StateHasChanged();
    }

    private void OnSwitchChange(ChangeEventArgs e)
    {
        _lastChangeEvent = $"Changed to: {e.Value} at {DateTime.Now:HH:mm:ss}";
        StateHasChanged();
    }

    private void SubmitForm()
    {
        // In a real application, you would submit the form data to a server
        Console.WriteLine("Form submitted with data: " + GetFormDataJson());
    }

    private string GetFormDataJson()
    {
        return System.Text.Json.JsonSerializer.Serialize(_formData, new System.Text.Json.JsonSerializerOptions { WriteIndented = true });
    }

    public class UserPreferences
    {
        public bool EmailNotifications { get; set; } = true;
        public bool SmsNotifications { get; set; }
        public bool MarketingEmails { get; set; }
    }
}
