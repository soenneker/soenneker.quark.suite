@page "/forms/input-demo"
@using System.ComponentModel.DataAnnotations
@using Microsoft.AspNetCore.Components.Forms

<PageTitle>Input Component - Quark Suite</PageTitle>

<div class="space-y-8 max-w-4xl">
    <div class="space-y-4">
        <DemoSection Title="When to use Input" Description="Use Input for straightforward string-based text fields." Code="@(@"<Input Type=""text"" Placeholder=""Enter your text..."" />")">
            <div class="rounded-lg border bg-card p-6 space-y-4">
                <p class="text-sm text-muted-foreground">
                    Use <code class="text-xs bg-muted px-1 py-0.5 rounded">Input</code> for straightforward string-based text fields.
                </p>
            </div>
        </DemoSection>
    </div>

    <div class="space-y-4">
        <DemoSection Title="Default" Description="A simple text input with placeholder." Code="@(@"<Input Type=""text"" Placeholder=""Enter your text..."" />")">
            <div class="max-w-md">
                <Input Type="text" Placeholder="Enter your text..." />
            </div>
        </DemoSection>
    </div>

    <div class="space-y-4">
        <DemoSection Title="Input Types" Description="Different HTML input types." Code="@(@"<Input Type=""text"" Placeholder=""Text"" />
<Input Type=""email"" Placeholder=""you@example.com"" />
<Input Type=""password"" Placeholder=""Password"" />
<Input Type=""number"" Placeholder=""123"" />
<Input Type=""search"" Placeholder=""Search..."" />
<Input Type=""date"" />
<Input Type=""time"" />
<Input Type=""file"" />")">
            <div class="space-y-4 max-w-md">
                <div class="space-y-2"><label class="text-sm font-medium">Text</label><Input Type="text" Placeholder="Text" /></div>
                <div class="space-y-2"><label class="text-sm font-medium">Email</label><Input Type="email" Placeholder="you@example.com" /></div>
                <div class="space-y-2"><label class="text-sm font-medium">Password</label><Input Type="password" Placeholder="Password" /></div>
                <div class="space-y-2"><label class="text-sm font-medium">Number</label><Input Type="number" Placeholder="123" /></div>
                <div class="space-y-2"><label class="text-sm font-medium">Search</label><Input Type="search" Placeholder="Search..." /></div>
                <div class="space-y-2"><label class="text-sm font-medium">Date</label><Input Type="date" /></div>
                <div class="space-y-2"><label class="text-sm font-medium">Time</label><Input Type="time" /></div>
                <div class="space-y-2"><label class="text-sm font-medium">File</label><Input Type="file" /></div>
            </div>
        </DemoSection>
    </div>

    <div class="space-y-4">
        <DemoSection Title="Disabled and Required" Description="Input states for disabled and required forms." Code="@(@"<Input Type=""text"" Placeholder=""Disabled input"" Disabled=""true"" Value=""Cannot edit this"" />
<Input Type=""text"" Placeholder=""Required input"" Required=""true"" />")">
            <div class="max-w-md space-y-4">
                <Input Type="text" Placeholder="Disabled input" Disabled="true" Value="Cannot edit this" />
                <Input Type="text" Placeholder="Required input" Required="true" />
            </div>
        </DemoSection>
    </div>

    <div class="space-y-4">
        <DemoSection Title="Accessibility (ARIA)" Description="Inputs with ARIA labels and invalid state." Code="@(@"<Input Type=""text"" Placeholder=""Full name"" aria-label=""User full name"" />
<Input Type=""text"" Placeholder=""Username"" aria-describedby=""username-help"" />
<p id=""username-help"" class=""text-sm text-muted-foreground"">Username must be unique.</p>
<Input Type=""email"" Value=""invalid-email"" aria-invalid=""true"" />")">
            <div class="max-w-md space-y-4">
                <Input Type="text" Placeholder="Full name" aria-label="User full name" />
                <Input Type="text" Placeholder="Username" aria-describedby="username-help" />
                <p id="username-help" class="text-sm text-muted-foreground">Username must be unique.</p>
                <Input Type="email" Value="invalid-email" aria-invalid="true" />
            </div>
        </DemoSection>
    </div>

    <div class="space-y-4">
        <DemoSection Title="Two-Way Binding" Description="Real-time updates using Value and ValueChanged." Code="@(@"<Input Type=""text"" Value=""@_boundValue"" ValueChanged=""@((v) => _boundValue = v)"" Placeholder=""Start typing..."" />
<div class=""rounded-lg border p-4 bg-muted/50"">
    <p class=""text-sm font-medium mb-1"">Current value:</p>
    <p class=""text-sm font-mono"">@(_boundValue ?? ""(null)"")</p>
</div>")">
            <div class="max-w-md space-y-4">
                <Input Type="text" Value="@_boundValue" ValueChanged="@((v) => _boundValue = v)" Placeholder="Start typing..." />
                <div class="rounded-lg border p-4 bg-muted/50">
                    <p class="text-sm font-medium mb-1">Current value:</p>
                    <p class="text-sm font-mono">@(_boundValue ?? "(null)")</p>
                </div>
            </div>
        </DemoSection>
    </div>

    <div class="space-y-4">
        <DemoSection Title="Custom Styling" Description="Override styles with Class." Code="@(@"<Input Type=""text"" Placeholder=""Blue border"" Class=""border-blue-500 focus-visible:ring-blue-500"" />
<Input Type=""search"" Placeholder=""Rounded full"" Class=""rounded-full"" />
<Input Type=""text"" Value=""Valid input"" Class=""border-green-500 focus-visible:ring-green-500"" />")">
            <div class="space-y-4 max-w-md">
                <Input Type="text" Placeholder="Blue border" Class="border-blue-500 focus-visible:ring-blue-500" />
                <Input Type="search" Placeholder="Rounded full" Class="rounded-full" />
                <Input Type="text" Value="Valid input" Class="border-green-500 focus-visible:ring-green-500" />
            </div>
        </DemoSection>
    </div>

    <div class="space-y-4">
        <DemoSection Title="Form Validation" Description="Input integrated with EditForm validation." Code="@(@"<EditForm Model=""_formModel"" OnValidSubmit=""HandleValidSubmit"" class=""max-w-md space-y-4"">
    <DataAnnotationsValidator />
    <label class=""text-sm font-medium"">Name</label>
    <Input Type=""text"" @bind-Value=""_formModel.Name"" Placeholder=""Enter your name"" />
    <ValidationMessage For=""@(() => _formModel.Name)"" class=""text-sm text-destructive"" />
    <label class=""text-sm font-medium"">Email</label>
    <Input Type=""email"" @bind-Value=""_formModel.Email"" Placeholder=""Enter your email"" />
    <ValidationMessage For=""@(() => _formModel.Email)"" class=""text-sm text-destructive"" />
    <Button Type=""ButtonType.Submit"" Variant=""ButtonVariant.Default"">Submit</Button>
</EditForm>")">
        <EditForm Model="_formModel" OnValidSubmit="HandleValidSubmit" class="max-w-md space-y-4">
            <DataAnnotationsValidator />

            <div class="space-y-2">
                <label class="text-sm font-medium">Name</label>
                <Input Type="text" @bind-Value="_formModel.Name" Placeholder="Enter your name" />
                <ValidationMessage For="@(() => _formModel.Name)" class="text-sm text-destructive" />
            </div>

            <div class="space-y-2">
                <label class="text-sm font-medium">Email</label>
                <Input Type="email" @bind-Value="_formModel.Email" Placeholder="Enter your email" />
                <ValidationMessage For="@(() => _formModel.Email)" class="text-sm text-destructive" />
            </div>

            <div class="flex gap-4">
                <Button Type="@ButtonType.Submit" Variant="ButtonVariant.Default">Submit</Button>
                <Button Type="@ButtonType.Button" Variant="ButtonVariant.Outline" OnClick="@(_ => ResetForm())">Reset</Button>
            </div>

            @if (!string.IsNullOrEmpty(_formMessage))
            {
                <div class="p-4 bg-card rounded-lg border">
                    <p class="text-sm">@_formMessage</p>
                </div>
            }
        </EditForm>
        </DemoSection>
    </div>
</div>

@code {
    private string? _boundValue;
    private InputFormModel _formModel = new();
    private string? _formMessage;

    private void HandleValidSubmit()
    {
        _formMessage = $"Form submitted! Name: {_formModel.Name}, Email: {_formModel.Email}";
    }

    private void ResetForm()
    {
        _formModel = new();
        _formMessage = null;
    }

    private sealed class InputFormModel
    {
        [Required(ErrorMessage = "Name is required.")]
        [StringLength(50, MinimumLength = 2, ErrorMessage = "Name must be between 2 and 50 characters.")]
        public string? Name { get; set; }

        [Required(ErrorMessage = "Email is required.")]
        [EmailAddress(ErrorMessage = "Please enter a valid email address.")]
        public string? Email { get; set; }
    }
}
