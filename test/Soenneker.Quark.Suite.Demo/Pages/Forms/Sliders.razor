@page "/forms/sliders"

<PageTitle>Sliders - Quark Suite</PageTitle>

<Div Class="space-y-8 max-w-4xl">
    <Div Class="space-y-3">
        <H1 Class="text-4xl font-bold tracking-tight">Sliders</H1>
        <Paragraph Class="text-xl text-muted-foreground" Margin="Margin.Is0">Range input with Min, Max, Value binding, and styling options.</Paragraph>
    </Div>

    <Div Class="space-y-6">
        <section class="space-y-4">
            <DemoSection Title="Binding test" Description="Move sliders or use buttons to verify two-way binding.">
            <Alert Class="border-border bg-muted/50" Margin="Margin.Is0.FromBottom">
                <Strong>Test:</Strong> Move sliders or click "Load Test Data" to verify binding.
            </Alert>

            <Div Class="p-4 rounded-lg border border-border bg-muted/30">
                <H3 Class="text-lg font-semibold" Margin="Margin.Is0.FromBottom">Two-Way Binding</H3>

                <Div Margin="Margin.Is3.FromBottom">
                    <Label For="testSlider1" FontWeight="FontWeight.Bold">Test Slider 1 (0-100):</Label>
                    <Slider @bind-Value="_testSlider1" Min="0" Max="100"/>
                    <Div Margin="Margin.Is2.FromTop" Padding="Padding.Is2" BackgroundColor="BackgroundColor.White" BorderRadius="BorderRadius.Default">
                        <Strong>Bound Value:</Strong> <Code>@_testSlider1.ToString("F1")</Code>
                    </Div>
                </Div>

                <Div Margin="Margin.Is3.FromBottom">
                    <Label For="testSlider2" FontWeight="FontWeight.Bold">Test Slider 2 (Pre-set to 75):</Label>
                    <Slider @bind-Value="_testSlider2" Min="0" Max="100"/>
                    <Div Margin="Margin.Is2.FromTop" Padding="Padding.Is2" BackgroundColor="BackgroundColor.White" BorderRadius="BorderRadius.Default">
                        <Strong>Bound Value:</Strong> <Code>@_testSlider2.ToString("F1")</Code>
                    </Div>
                </Div>

                <Div Class="flex flex-wrap gap-2 mt-4">
                    <Button Class="bg-primary text-primary-foreground" OnClick="LoadSliderTestData">Load Test Data</Button>
                    <Button Class="bg-secondary text-secondary-foreground" OnClick="ClearSliderTestData">Clear (0)</Button>
                    <Button Class="bg-muted text-muted-foreground" OnClick="UpdateSliderTestData">Random</Button>
                </Div>

                <Div Class="mt-4 p-3 rounded-lg border border-border bg-muted/30">
                    <H4 Class="text-sm font-semibold">Results:</H4>
                    <UnorderedList Margin="Margin.Is0.FromBottom">
                        <UnorderedListItem>
                            <Strong>Slider 1:</Strong> @_testSlider1.ToString("F1")
                        </UnorderedListItem>
                        <UnorderedListItem>
                            <Strong>Slider 2:</Strong> @_testSlider2.ToString("F1")
                        </UnorderedListItem>
                    </UnorderedList>
                </Div>
            </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Basic" Description="@($"Current value: {_basicValue}.")">
                <Slider Value="@_basicValue" OnValueChanged="HandleBasicValueChanged"/>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Min and max" Description="@($"Range 0–100; value {_minMaxValue}.")">
                <Slider Min="0" Max="100" Value="@_minMaxValue" OnValueChanged="HandleMinMaxValueChanged"/>
                <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">Current value: <Strong>@_minMaxValue</Strong></Paragraph>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Step" Description="@($"Step 5; value {_stepValue}.")">
                <Slider Min="0" Max="100" Step="5" Value="@_stepValue" OnValueChanged="HandleStepValueChanged"/>
                <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">Current value: <Strong>@_stepValue</Strong> (Step: 5)</Paragraph>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Sizes" Description="Small, default, and large.">
                <Div Class="space-y-4">
                    <Div>
                        <H5 Class="text-sm font-medium text-muted-foreground">Small</H5>
                        <Slider Min="0" Max="100" Value="@_smallValue" Size="Size.Small" OnValueChanged="HandleSmallValueChanged"/>
                        <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">Value: <Strong>@_smallValue</Strong></Paragraph>
                    </Div>
                    <Div>
                        <H5 Class="text-sm font-medium text-muted-foreground">Default</H5>
                        <Slider Min="0" Max="100" Value="@_defaultValue" Size="Size.Default" OnValueChanged="HandleDefaultValueChanged"/>
                        <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">Value: <Strong>@_defaultValue</Strong></Paragraph>
                    </Div>
                    <Div>
                        <H5 Class="text-sm font-medium text-muted-foreground">Large</H5>
                        <Slider Min="0" Max="100" Value="@_largeValue" Size="Size.Large" OnValueChanged="HandleLargeValueChanged"/>
                        <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">Value: <Strong>@_largeValue</Strong></Paragraph>
                    </Div>
                </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Colors" Description="Primary, success, warning, danger.">
                <Div Class="space-y-4">
                    <Div>
                        <H5 Class="text-sm font-medium text-muted-foreground">Primary</H5>
                        <Slider Min="0" Max="100" Value="@_primaryValue" Color="Color.Primary" OnValueChanged="HandlePrimaryValueChanged"/>
                        <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">@_primaryValue</Paragraph>
                    </Div>
                    <Div>
                        <H5 Class="text-sm font-medium text-muted-foreground">Success</H5>
                        <Slider Min="0" Max="100" Value="@_successValue" Color="Color.Success" OnValueChanged="HandleSuccessValueChanged"/>
                        <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">@_successValue</Paragraph>
                    </Div>
                    <Div>
                        <H5 Class="text-sm font-medium text-muted-foreground">Warning</H5>
                        <Slider Min="0" Max="100" Value="@_warningValue" Color="Color.Warning" OnValueChanged="HandleWarningValueChanged"/>
                        <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">@_warningValue</Paragraph>
                    </Div>
                    <Div>
                        <H5 Class="text-sm font-medium text-muted-foreground">Danger</H5>
                        <Slider Min="0" Max="100" Value="@_dangerValue" Color="Color.Danger" OnValueChanged="HandleDangerValueChanged"/>
                        <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">@_dangerValue</Paragraph>
                    </Div>
                </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Disabled" Description="Slider is read-only.">
                <Slider Min="0" Max="100" Value="50" Disabled="true"/>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Range (min/max)" Description="@($"Min {_rangeMin}, max {_rangeMax}.")">
            <Div Margin="Margin.Is3.FromBottom">
                <Slider Min="0" Max="100" Value="@_rangeMin" OnValueChanged="HandleRangeMinChanged"/>
                <Paragraph TextColor="TextColor.Muted">Min value: <Strong>@_rangeMin</Strong></Paragraph>
            </Div>
            <Div Margin="Margin.Is3.FromBottom">
                <Slider Min="0" Max="100" Value="@_rangeMax" OnValueChanged="HandleRangeMaxChanged"/>
                <Paragraph TextColor="TextColor.Muted">Max value: <Strong>@_rangeMax</Strong></Paragraph>
            </Div>
            <Div>
                <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">Range: @_rangeMin – @_rangeMax</Paragraph>
            </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="With labels" Description="@($"Labels 0–100; value {_labeledValue}.")">
            <Div>
                <Div Display="Display.Flex" JustifyContent="JustifyContent.Between" Margin="Margin.Is2.FromBottom">
                    <Span>0</Span>
                    <Span>25</Span>
                    <Span>50</Span>
                    <Span>75</Span>
                    <Span>100</Span>
                </Div>
                <Slider Min="0" Max="100" Value="@_labeledValue" OnValueChanged="HandleLabeledValueChanged"/>
                <Paragraph Class="text-muted-foreground" Margin="Margin.Is0">Value: <Strong>@_labeledValue</Strong></Paragraph>
            </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Interactive controls" Description="@($"Value {_interactiveValue}; buttons set 0, 50, 100, or random.")">
                <Slider Min="0" Max="100" Value="@_interactiveValue" OnValueChanged="HandleInteractiveValueChanged"/>
                <Div Class="flex flex-wrap gap-2 mt-4">
                    <Button Class="bg-primary text-primary-foreground" Size="ButtonSize.Sm" OnClick="SetToZero">0</Button>
                    <Button Class="bg-secondary text-secondary-foreground" Size="ButtonSize.Sm" OnClick="SetToFifty">50</Button>
                    <Button Class="bg-primary text-primary-foreground" Size="ButtonSize.Sm" OnClick="SetToHundred">100</Button>
                    <Button Class="bg-muted text-muted-foreground" Size="ButtonSize.Sm" OnClick="SetRandom">Random</Button>
                </Div>
            </DemoSection>
        </section>

        <section class="space-y-4">
            <DemoSection Title="Custom attributes" Description="@($"Name, Id, Class; value {_customValue}.")">
                <Slider Min="0" Max="100" Value="@_customValue"
                        OnValueChanged="HandleCustomValueChanged"
                        Name="customSlider"
                        Id="customSlider"
                        Class="custom-slider"/>
            </DemoSection>
        </section>
    </Div>
</Div>

@code {

    // Binding Test Fields
    private double _testSlider1 = 0;
    private double _testSlider2 = 75;

    private double _basicValue = 50;
    private double _minMaxValue = 25;
    private double _stepValue = 30;
    private double _smallValue = 40;
    private double _defaultValue = 60;
    private double _largeValue = 80;
    private double _primaryValue = 35;
    private double _successValue = 65;
    private double _warningValue = 45;
    private double _dangerValue = 75;
    private double _rangeMin = 20;
    private double _rangeMax = 80;
    private double _labeledValue = 50;
    private double _interactiveValue = 25;
    private double _customValue = 55;

    private void LoadSliderTestData()
    {
        _testSlider1 = 50;
        _testSlider2 = 90;
    }

    private void ClearSliderTestData()
    {
        _testSlider1 = 0;
        _testSlider2 = 0;
    }

    private void UpdateSliderTestData()
    {
        var random = new Random();
        _testSlider1 = random.NextDouble() * 100;
        _testSlider2 = random.NextDouble() * 100;
    }

    private async Task HandleBasicValueChanged(double value)
    {
        _basicValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleMinMaxValueChanged(double value)
    {
        _minMaxValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleStepValueChanged(double value)
    {
        _stepValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleSmallValueChanged(double value)
    {
        _smallValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleDefaultValueChanged(double value)
    {
        _defaultValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleLargeValueChanged(double value)
    {
        _largeValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandlePrimaryValueChanged(double value)
    {
        _primaryValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleSuccessValueChanged(double value)
    {
        _successValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleWarningValueChanged(double value)
    {
        _warningValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleDangerValueChanged(double value)
    {
        _dangerValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleRangeMinChanged(double value)
    {
        _rangeMin = value;
        if (_rangeMin > _rangeMax)
        {
            _rangeMax = _rangeMin;
        }

        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleRangeMaxChanged(double value)
    {
        _rangeMax = value;
        if (_rangeMax < _rangeMin)
        {
            _rangeMin = _rangeMax;
        }

        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleLabeledValueChanged(double value)
    {
        _labeledValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleInteractiveValueChanged(double value)
    {
        _interactiveValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleCustomValueChanged(double value)
    {
        _customValue = value;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task SetToZero()
    {
        _interactiveValue = 0;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task SetToFifty()
    {
        _interactiveValue = 50;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task SetToHundred()
    {
        _interactiveValue = 100;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task SetRandom()
    {
        var random = new Random();
        _interactiveValue = random.Next(0, 101);
        StateHasChanged();
        await Task.CompletedTask;
    }

    protected override void OnInitialized()
    {
    }

}
