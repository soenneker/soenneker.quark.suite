@page "/forms/code-editor"

<PageTitle>Code Editor - Quark Suite</PageTitle>

<Div Class="space-y-8 max-w-4xl">
    <Div Class="space-y-3">
        <H1 Class="text-4xl font-bold tracking-tight">Code Editor</H1>
        <Paragraph Class="text-xl text-muted-foreground" Margin="Margin.Is0">Monaco-based editor with language, theme, and layout options.</Paragraph>
    </Div>

    <Div Class="space-y-6">
        <Div Class="grid gap-6 lg:grid-cols-[1fr_3fr]">
        <Div>
            <Card>
                <CardBody>
                    <H4>Options</H4>
                    <Div Margin="Margin.Is2.FromBottom">
                        <Label Form="true">Language</Label>
                        <Select TValue="string" SelectedValue="_language" SelectedValueChanged="v => _language = v">
                            <SelectItem Value="@("csharp")">CSharp</SelectItem>
                            <SelectItem Value="@("json")">JSON</SelectItem>
                            <SelectItem Value="@("xml")">XML</SelectItem>
                            <SelectItem Value="@("javascript")">JavaScript</SelectItem>
                            <SelectItem Value="@("typescript")">TypeScript</SelectItem>
                            <SelectItem Value="@("html")">HTML</SelectItem>
                            <SelectItem Value="@("css")">CSS</SelectItem>
                            <SelectItem Value="@("sql")">SQL</SelectItem>
                            <SelectItem Value="@("yaml")">YAML</SelectItem>
                            <SelectItem Value="@("markdown")">Markdown</SelectItem>
                        </Select>
                    </Div>

                    <Div Margin="Margin.Is2.FromBottom">
                        <Label Form="true">Theme</Label>
                        <Select TValue="string" SelectedValue="_theme" SelectedValueChanged="v => _theme = v">
                            <SelectItem Value="@("vs")">vs (light)</SelectItem>
                            <SelectItem Value="@("vs-dark")">vs-dark</SelectItem>
                            <SelectItem Value="@("hc-black")">hc-black</SelectItem>
                        </Select>
                    </Div>

                    <Div Margin="Margin.Is2.FromBottom">
                        <Check Checked="_wordWrap" CheckedChanged="v => _wordWrap = v">Word Wrap</Check>
                    </Div>
                    <Div Margin="Margin.Is2.FromBottom">
                        <Check Checked="_minimap" CheckedChanged="v => _minimap = v">Minimap</Check>
                    </Div>
                    <Div Margin="Margin.Is2.FromBottom">
                        <Check Checked="_autoHeight" CheckedChanged="v => _autoHeight = v">Auto Height</Check>
                    </Div>
                    @if (!_autoHeight)
                    {
                        <Div Margin="Margin.Is2.FromBottom">
                            <Label Form="true">Height (px)</Label>
                            <NumericEdit Value="@((decimal)_editorHeight)" ValueChanged="v => _editorHeight = (int)v.GetValueOrDefault(300)" />
                        </Div>
                    }
                    else
                    {
                        <Div Margin="Margin.Is2.FromBottom">
                            <Label Form="true">Min Lines</Label>
                            <NumericEdit Value="@((decimal?)_minLines)" ValueChanged="v => _minLines = (int?)v" />
                        </Div>
                        <Div Margin="Margin.Is2.FromBottom">
                            <Label Form="true">Max Lines</Label>
                            <NumericEdit Value="@((decimal?)_maxLines)" ValueChanged="v => _maxLines = (int?)v" />
                        </Div>
                    }
                </CardBody>
            </Card>
        </Div>
        <Div Class="min-w-0">
            <CodeEditor @bind-Text="_text"
                        Language="@_language"
                        Theme="@_theme"
                        WordWrap="@_wordWrap"
                        Minimap="@_minimap"
                        AutoHeight="@_autoHeight"
                        MinLines="@_minLines"
                        MaxLines="@_maxLines"
                        Style="@(!_autoHeight ? $"height: {_editorHeight}px" : null)" />
            <Div Margin="Margin.Is3.FromTop">
                <H5>Value</H5>
                <Pre>@_text</Pre>
            </Div>
        </Div>
        </Div>

        <section class="space-y-4">
            <DemoSection Title="Auto height examples" Description="Editors that adjust height by content.">
            <Div Class="grid gap-6 lg:grid-cols-2">
        <Div>
            <Card>
                <CardBody>
                    <H5 Margin="Margin.Is3.FromBottom">Min 3 lines, Max 10 lines</H5>
                    <CodeEditor @bind-Text="_autoHeightText1"
                                Language="javascript"
                                Theme="@_theme"
                                AutoHeight="true"
                                MinLines="3"
                                MaxLines="10" />
                </CardBody>
            </Card>
        </Div>
        <Div>
            <Card>
                <CardBody>
                    <H5 Margin="Margin.Is3.FromBottom">Min 5 lines, No Max</H5>
                    <CodeEditor @bind-Text="_autoHeightText2"
                                Language="json"
                                Theme="@_theme"
                                AutoHeight="true"
                                MinLines="5"
                                MaxLines="null" />
                </CardBody>
            </Card>
        </Div>
            </Div>
            </DemoSection>
        </section>
    </Div>
</Div>

@code {
    private string _language = "csharp";
    private string _theme = "vs-dark";
    private bool _wordWrap = false;
    private bool _minimap = true;
    private bool _autoHeight = true;
    private int _editorHeight = 300;
    private int? _minLines = 3;
    private int? _maxLines = 30;
    private string _text = "// Hello, Monaco!\npublic class Demo { }";
    
    private string _autoHeightText1 = @"// Try adding more lines!
console.log('Hello');";
    
    private string _autoHeightText2 = @"{
  ""name"": ""example"",
  ""value"": ""test""
}";
}


