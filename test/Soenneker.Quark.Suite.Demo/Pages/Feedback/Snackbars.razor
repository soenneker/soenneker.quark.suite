@page "/feedback/snackbars"

<Container Padding="Padding.Is4.OnY">
    <Row>
        <Column>
            <Div TextAlignment="TextAlignment.Center" Margin="Margin.Is5.FromEnd">
                <H1 DisplaySize="DisplaySize.Is4" FontWeight="FontWeight.Bold" TextColor="TextColor.Primary">Snackbars</H1>
                <Paragraph Class="lead" TextColor="TextColor.Muted">This page demonstrates the Snackbar components for displaying temporary notifications and messages.</Paragraph>
            </Div>
        </Column>
    </Row>

    <Row Gap="Gap.Is4">
        <Column>
            <Div>
                <H2>Basic Snackbars</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Primary" @onclick="ShowBasicSnackbar">Show Basic Snackbar</Button>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Success" @onclick="ShowSuccessSnackbar">Show Success Snackbar</Button>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Warning" @onclick="ShowWarningSnackbar">Show Warning Snackbar</Button>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Danger" @onclick="ShowErrorSnackbar">Show Error Snackbar</Button>
                    </Div>
                </Div>
                <Paragraph TextColor="TextColor.Muted">Basic snackbars with different color schemes and auto-dismiss functionality.</Paragraph>

                <CodeEditor ReadOnly="true" 
                            Language="@("csharp")" 
                            Margin="Margin.Is3.FromTop"
                            AutoHeight="true"
                            Text="@(@"// In your component's @code section:
[Inject] private ISnackbarService SnackbarService { get; set; }

private void ShowBasicSnackbar()
{
    SnackbarService.Show(""This is a basic snackbar message"");
}

private void ShowSuccessSnackbar()
{
    SnackbarService.Show(""Success!"", SnackbarColor.Success);
}

private void ShowErrorSnackbar()
{
    SnackbarService.Show(""Error occurred"", SnackbarColor.Danger);
}")" />
            </Div>

            <Hr/>

            <Div>
                <H2>Snackbars with Actions</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Info" @onclick="ShowActionSnackbar">Show Snackbar with Action</Button>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Secondary" @onclick="ShowMultiActionSnackbar">Show Multi-Action Snackbar</Button>
                    </Div>
                </Div>
                <Paragraph TextColor="TextColor.Muted">Snackbars with action buttons for user interaction.</Paragraph>
            </Div>

            <Hr/>

            <Div>
                <H2>Snackbars with Custom Duration</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Primary" @onclick="() => ShowCustomDurationSnackbar(1000)">Show 1 Second Snackbar</Button>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Success" @onclick="() => ShowCustomDurationSnackbar(5000)">Show 5 Second Snackbar</Button>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Warning" @onclick="() => ShowCustomDurationSnackbar(10000)">Show 10 Second Snackbar</Button>
                    </Div>
                </Div>
                <Paragraph TextColor="TextColor.Muted">Snackbars with custom auto-dismiss durations.</Paragraph>
            </Div>

            <Hr/>

            <Div>
                <H2>Persistent Snackbars</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Danger" @onclick="ShowPersistentSnackbar">Show Persistent Snackbar</Button>
                    </Div>
                </Div>
                <Paragraph TextColor="TextColor.Muted">Snackbars that don't auto-dismiss and require manual dismissal.</Paragraph>
            </Div>

            <Hr/>

            <Div>
                <H2>Snackbars with Custom Styling</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Info" @onclick="ShowCustomStyledSnackbar">Show Custom Styled Snackbar</Button>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Primary" @onclick="ShowGradientSnackbar">Show Gradient Snackbar</Button>
                    </Div>
                </Div>
                <Paragraph TextColor="TextColor.Muted">Snackbars with custom CSS styling and themes.</Paragraph>
            </Div>

            <Hr/>

            <Div>
                <H2>Snackbar Stack</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Primary" @onclick="AddToStack">Add Multiple Snackbars to Stack</Button>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Secondary" @onclick="ClearStack">Clear All Snackbars</Button>
                    </Div>
                </Div>
                <Paragraph TextColor="TextColor.Muted">Multiple snackbars stacked on top of each other.</Paragraph>
            </Div>

            <Hr/>

            <Div>
                <H2>Snackbar Positions</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Row>
                        <Column Size="ColumnSize.Is6">
                            <Div Margin="Margin.Is2.FromBottom">
                                <Button BackgroundColor="@BackgroundColor.Primary" @onclick="@(() => ShowPositionedSnackbar("top-left"))" Size="ButtonSize.Sm" Width="Width.Is100">Top Left</Button>
                            </Div>
                            <Div Margin="Margin.Is2.FromBottom">
                                <Button BackgroundColor="@BackgroundColor.Primary" @onclick="@(() => ShowPositionedSnackbar("top-center"))" Size="ButtonSize.Sm" Width="Width.Is100">Top Center</Button>
                            </Div>
                            <Div Margin="Margin.Is2.FromBottom">
                                <Button BackgroundColor="@BackgroundColor.Primary" @onclick="@(() => ShowPositionedSnackbar("top-right"))" Size="ButtonSize.Sm" Width="Width.Is100">Top Right</Button>
                            </Div>
                        </Column>
                        <Column Size="ColumnSize.Is6">
                            <Div Margin="Margin.Is2.FromBottom">
                                <Button BackgroundColor="@BackgroundColor.Success" @onclick="@(() => ShowPositionedSnackbar("bottom-left"))" Size="ButtonSize.Sm" Width="Width.Is100">Bottom Left</Button>
                            </Div>
                            <Div Margin="Margin.Is2.FromBottom">
                                <Button BackgroundColor="@BackgroundColor.Success" @onclick="@(() => ShowPositionedSnackbar("bottom-center"))" Size="ButtonSize.Sm" Width="Width.Is100">Bottom Center</Button>
                            </Div>
                            <Div Margin="Margin.Is2.FromBottom">
                                <Button BackgroundColor="@BackgroundColor.Success" @onclick="@(() => ShowPositionedSnackbar("bottom-right"))" Size="ButtonSize.Sm" Width="Width.Is100">Bottom Right</Button>
                            </Div>
                        </Column>
                    </Row>
                </Div>
                <Paragraph TextColor="TextColor.Muted">Snackbars positioned at different locations on the screen.</Paragraph>
            </Div>

            <Hr/>

            <Div>
                <H2>Snackbars with Location Parameter</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Primary" @onclick="ShowLocationOverrideSnackbar">Show Snackbar with Location Override</Button>
                    </Div>
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Success" @onclick="ShowMultipleLocationSnackbars">Show Multiple Locations Simultaneously</Button>
                    </Div>
                </Div>
                <Paragraph TextColor="TextColor.Muted">Snackbars with individual location overrides using the new location parameter.</Paragraph>
            </Div>

            <Hr/>

            <Div>
                <H2>Snackbar with Rich Content</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Info" @onclick="ShowRichContentSnackbar">Show Rich Content Snackbar</Button>
                    </Div>
                </Div>
                <Paragraph TextColor="TextColor.Muted">Snackbars with icons, formatted text, and multiple lines.</Paragraph>
            </Div>

            <Hr/>

            <Div>
                <H2>Snackbar Component Properties</H2>
                <Div BackgroundColor="BackgroundColor.Light" Padding="Padding.Is3" Margin="Margin.Is3.FromBottom">
                    <H3>Snackbar Features</H3>
                    <Paragraph>Snackbar components provide comprehensive notification functionality:</Paragraph>
                    <UnorderedList>
                        <UnorderedListItem><Strong>Snackbar:</Strong> Main notification component</UnorderedListItem>
                        <UnorderedListItem><Strong>SnackbarBody:</Strong> Content area of the snackbar</UnorderedListItem>
                        <UnorderedListItem><Strong>SnackbarHeader:</Strong> Header section with title</UnorderedListItem>
                        <UnorderedListItem><Strong>SnackbarFooter:</Strong> Footer section with actions</UnorderedListItem>
                        <UnorderedListItem><Strong>SnackbarAction:</Strong> Action buttons within snackbars</UnorderedListItem>
                        <UnorderedListItem><Strong>SnackbarStack:</Strong> Container for multiple snackbars</UnorderedListItem>
                        <UnorderedListItem><Strong>Auto-dismiss:</Strong> Configurable auto-dismiss timing</UnorderedListItem>
                        <UnorderedListItem><Strong>Positioning:</Strong> Flexible positioning options</UnorderedListItem>
                        <UnorderedListItem><Strong>Styling:</Strong> Custom themes and colors</UnorderedListItem>
                        <UnorderedListItem><Strong>Actions:</Strong> Interactive buttons and links</UnorderedListItem>
                    </UnorderedList>
                </Div>
            </Div>

            <Hr/>

            <Div>
                <H2>Theme Configuration</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Primary" @onclick="ShowThemeConfiguredSnackbar">Show Theme-Configured Snackbar</Button>
                    </Div>
                </Div>
                <Paragraph TextColor="TextColor.Muted">Snackbars that use theme-configured default location and delay settings.</Paragraph>
            </Div>

            <Hr/>

            <Div>
                <H2>Accessibility Features</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Div Margin="Margin.Is3.FromBottom">
                        <Button BackgroundColor="@BackgroundColor.Primary" @onclick="ShowAccessibleSnackbar">Show Accessible Snackbar</Button>
                    </Div>
                </Div>
                <Paragraph TextColor="TextColor.Muted">Snackbars with proper ARIA attributes and keyboard navigation support.</Paragraph>
            </Div>
        </Column>
    </Row>
</Container>

<!-- Snackbar Stack Container -->
<SnackbarStack @ref="_snackbarStackRef" />

@code {
    private SnackbarStack? _snackbarStackRef;

    private async Task ShowBasicSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("This is a basic snackbar message", BackgroundColor.Primary);
    }

    private async Task ShowSuccessSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("Operation completed successfully!", BackgroundColor.Success);
    }

    private async Task ShowWarningSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("Warning: Please review your input", BackgroundColor.Warning);
    }

    private async Task ShowErrorSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("Error: Something went wrong", BackgroundColor.Danger);
    }

    private async Task ShowActionSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("File uploaded successfully", BackgroundColor.Success, options =>
            {
                options.ShowAction = true;
                options.ActionText = "View";
            });
    }

    private async Task ShowMultiActionSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("Changes not saved", BackgroundColor.Warning, options =>
            {
                options.ShowAction = true;
                options.ActionText = "Save";
                options.ShowClose = true;
            });
    }

    private async Task ShowCustomDurationSnackbar(int duration)
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push($"This snackbar will dismiss in {duration / 1000} seconds", BackgroundColor.Info, options =>
            {
                options.HideDelay = duration;
            });
    }

    private async Task ShowPersistentSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("This snackbar requires manual dismissal", BackgroundColor.Danger, options =>
            {
                options.HideDelay = null; // Never auto-hide
                options.ShowClose = true;
                options.CloseText = "Dismiss";
            });
    }

    private async Task ShowCustomStyledSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("Custom styled snackbar with unique appearance", BackgroundColor.Info);
    }

    private async Task ShowGradientSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("Gradient styled snackbar", BackgroundColor.Primary);
    }

    private async Task AddToStack()
    {
        if (_snackbarStackRef != null)
        {
            await _snackbarStackRef.Push("First snackbar in stack", BackgroundColor.Primary);
            await Task.Delay(500);
            await _snackbarStackRef.Push("Second snackbar in stack", BackgroundColor.Success);
            await Task.Delay(500);
            await _snackbarStackRef.Push("Third snackbar in stack", BackgroundColor.Warning);
            await Task.Delay(500);
            await _snackbarStackRef.Push("Fourth snackbar in stack", BackgroundColor.Info);
        }
    }

    private async Task ClearStack()
    {
        // Clear functionality would need to be implemented in the SnackbarStack
        // For now, we'll just show a message
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("Stack cleared", BackgroundColor.Secondary);
    }

    private async Task ShowPositionedSnackbar(string position)
    {
        if (_snackbarStackRef != null)
        {
            SnackbarLocation location = position switch
            {
                "top-left" => SnackbarLocation.TopStart,
                "top-center" => SnackbarLocation.Top,
                "top-right" => SnackbarLocation.TopEnd,
                "bottom-left" => SnackbarLocation.BottomStart,
                "bottom-center" => SnackbarLocation.Bottom,
                "bottom-right" => SnackbarLocation.BottomEnd,
                _ => SnackbarLocation.BottomEnd
            };
            
            await _snackbarStackRef.Push($"Snackbar positioned at {position}", BackgroundColor.Primary, location: location);
        }
    }

    private async Task ShowRichContentSnackbar()
    {
        if (_snackbarStackRef != null)
        {
            var richContent = new RenderFragment(builder =>
            {
                builder.OpenElement(0, "div");
                builder.AddContent(1, "Email: ");
                builder.OpenElement(2, "strong");
                builder.AddContent(3, "New Message");
                builder.CloseElement();
                builder.AddMarkupContent(4, "<br/>");
                builder.AddContent(5, "You have received a new message from John Doe");
                builder.CloseElement();
            });

            await _snackbarStackRef.Push(richContent, BackgroundColor.Info, options =>
            {
                options.ShowAction = true;
                options.ActionText = "View";
            });
        }
    }

    private async Task ShowAccessibleSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("This snackbar has proper accessibility features", BackgroundColor.Primary);
    }

    private async Task ShowLocationOverrideSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("This snackbar uses the location parameter to override the default position", BackgroundColor.Info, location: SnackbarLocation.Top);
    }

    private async Task ShowMultipleLocationSnackbars()
    {
        if (_snackbarStackRef != null)
        {
            await _snackbarStackRef.Push("Top-left snackbar", BackgroundColor.Primary, location: SnackbarLocation.TopStart);
            await Task.Delay(200);
            await _snackbarStackRef.Push("Top-center snackbar", BackgroundColor.Secondary, location: SnackbarLocation.Top);
            await Task.Delay(200);
            await _snackbarStackRef.Push("Top-right snackbar", BackgroundColor.Success, location: SnackbarLocation.TopEnd);
            await Task.Delay(200);
            await _snackbarStackRef.Push("Bottom-left snackbar", BackgroundColor.Warning, location: SnackbarLocation.BottomStart);
            await Task.Delay(200);
            await _snackbarStackRef.Push("Bottom-center snackbar", BackgroundColor.Info, location: SnackbarLocation.Bottom);
            await Task.Delay(200);
            await _snackbarStackRef.Push("Bottom-right snackbar", BackgroundColor.Danger, location: SnackbarLocation.BottomEnd);
        }
    }

    // Action handlers
    private async Task HandleViewAction()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("View action clicked!", BackgroundColor.Success);
    }

    private async Task HandleSaveAction()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("Changes saved successfully!", BackgroundColor.Success);
    }

    private async Task HandleDiscardAction()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("Changes discarded", BackgroundColor.Warning);
    }

    private async Task HandleDismissAction()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("Snackbar dismissed", BackgroundColor.Info);
    }

    private async Task HandleMarkReadAction()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("Message marked as read", BackgroundColor.Success);
    }

    private async Task ShowThemeConfiguredSnackbar()
    {
        if (_snackbarStackRef != null)
            await _snackbarStackRef.Push("This snackbar uses theme-configured defaults (no explicit location or delay)", BackgroundColor.Info);
    }

    protected override void OnInitialized()
    {
    }
}
