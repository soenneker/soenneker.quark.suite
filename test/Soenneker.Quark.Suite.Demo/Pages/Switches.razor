@page "/switches"

<Div class="container mt-4">
    <Div class="row">
        <Div class="col-12">
            <Label class="mb-4" style="font-size: 2rem; font-weight: bold;">Switches</Label>
            <p class="lead">This page demonstrates the Switch component with various configurations and features.</p>
        </Div>
    </Div>

    <!-- Binding Test Section -->
    <Div class="row mb-4">
        <Div class="col-12">
            <H2>ðŸ§ª BINDING TEST SECTION</H2>
            <Alert Color="Color.Info" Margin="Margin.Is3.FromEnd">
                <strong>Test Instructions:</strong> Toggle switches below or click "Load Test Data" to verify binding works.
            </Alert>

            <div class="mb-4 p-3 bg-light rounded">
                <H3 Margin="Margin.Is3.FromBottom">Two-Way Binding Test</H3>
                
                <Div Margin="Margin.Is3.FromBottom">
                    <Switch @bind-Checked="_testSwitch1">
                        Test Switch 1
                    </Switch>
                    <div class="mt-2 p-2 bg-white rounded">
                        <strong>Bound Value:</strong> <code>@_testSwitch1</code>
                    </div>
                </Div>

                <Div Margin="Margin.Is3.FromBottom">
                    <Switch @bind-Checked="_testSwitch2">
                        Test Switch 2 (Pre-enabled)
                    </Switch>
                    <div class="mt-2 p-2 bg-white rounded">
                        <strong>Bound Value:</strong> <code>@_testSwitch2</code>
                    </div>
                </Div>

                <Div Margin="Margin.Is3.FromTop">
                    <Button Color="Color.Primary" OnClick="LoadSwitchTestData" Margin="Margin.Is2.FromEnd">Load Test Data (Enable All)</Button>
                    <Button Color="Color.Secondary" OnClick="ClearSwitchTestData" Margin="Margin.Is2.FromEnd">Clear Test Data (Disable All)</Button>
                    <Button Color="Color.Warning" OnClick="ToggleSwitchTestData">Toggle Values</Button>
                </Div>
                
                <div class="mt-3 p-3 bg-success bg-opacity-10 rounded">
                    <H4>Test Results:</H4>
                    <ul class="mb-0">
                        <li><strong>Switch 1:</strong> @_testSwitch1</li>
                        <li><strong>Switch 2:</strong> @_testSwitch2</li>
                    </ul>
                </div>
            </div>

            <Hr />
        </Div>
    </Div>

    <!-- ChildContent Support (New) -->
    <Div class="row mb-4">
        <Div class="col-12">
            <Label style="font-size: 1.5rem; font-weight: bold;">ChildContent Support (New)</Label>
            <Div class="card">
                <Div class="card-body">
                    <Div class="row">
                        <Div class="col-md-6">
                            <h5>Using ChildContent</h5>
                            <Switch @bind-Checked="childContentChecked">
                                Enable notifications
                            </Switch>
                            <Switch @bind-Checked="childContentChecked2">
                                Dark mode with <strong>bold text</strong>
                            </Switch>
                            <p class="text-muted mt-2">ChildContent allows rich content inside switches</p>
                        </Div>
                        <Div class="col-md-6">
                            <h5>Using Label (Legacy)</h5>
                            <Switch Label="Enable notifications" @bind-Checked="labelChecked" />
                            <p class="text-muted mt-2">The Label property is still supported for backward compatibility</p>
                        </Div>
                    </Div>
                </Div>
            </Div>
        </Div>
    </Div>

    <!-- Basic Switches -->
    <Div class="row mb-4">
        <Div class="col-12">
            <Label style="font-size: 1.5rem; font-weight: bold;">Basic Switches</Label>
            <Div class="card">
                <Div class="card-body">
                    <Div class="row">
                        <Div class="col-md-6">
                            <h5>Simple Switch</h5>
                            <Switch @bind-Checked="basicChecked">
                                Enable notifications
                            </Switch>
                            <p class="text-muted mt-2">Status: @(basicChecked ? "Enabled" : "Disabled")</p>
                        </Div>
                        <Div class="col-md-6">
                            <h5>Switch without Label</h5>
                            <Switch @bind-Checked="noLabelChecked" />
                            <p class="text-muted mt-2">Status: @(noLabelChecked ? "On" : "Off")</p>
                        </Div>
                    </Div>
                </Div>
            </Div>
        </Div>
    </Div>

    <!-- Color Variants -->
    <Div class="row mb-4">
        <Div class="col-12">
            <Label style="font-size: 1.5rem; font-weight: bold;">Color Variants</Label>
            <Div class="card">
                <Div class="card-body">
                    <Div class="row">
                        <Div class="col-md-4">
                            <h6>Primary</h6>
                            <Switch BackgroundColor="BackgroundColor.Primary" @bind-Checked="primaryChecked">
                                Primary Switch
                            </Switch>
                        </Div>
                        <Div class="col-md-4">
                            <h6>Secondary</h6>
                            <Switch BackgroundColor="BackgroundColor.Secondary" @bind-Checked="secondaryChecked">
                                Secondary Switch
                            </Switch>
                        </Div>
                        <Div class="col-md-4">
                            <h6>Success</h6>
                            <Switch BackgroundColor="BackgroundColor.Success" @bind-Checked="successChecked">
                                Success Switch
                            </Switch>
                        </Div>
                    </Div>
                    <Div class="row mt-3">
                        <Div class="col-md-4">
                            <h6>Danger</h6>
                            <Switch BackgroundColor="BackgroundColor.Danger" @bind-Checked="dangerChecked">
                                Danger Switch
                            </Switch>
                        </Div>
                        <Div class="col-md-4">
                            <h6>Warning</h6>
                            <Switch BackgroundColor="BackgroundColor.Warning" @bind-Checked="warningChecked">
                                Warning Switch
                            </Switch>
                        </Div>
                        <Div class="col-md-4">
                            <h6>Info</h6>
                            <Switch BackgroundColor="BackgroundColor.Info" @bind-Checked="infoChecked">
                                Info Switch
                            </Switch>
                        </Div>
                    </Div>
                </Div>
            </Div>
        </Div>
    </Div>

    <!-- Size Variants -->
    <Div class="row mb-4">
        <Div class="col-12">
            <Label style="font-size: 1.5rem; font-weight: bold;">Size Variants</Label>
            <Div class="card">
                <Div class="card-body">
                    <Div class="row">
                        <Div class="col-md-4">
                            <h6>Small</h6>
                            <Switch Label="Small Switch" Size="Size.Small" @bind-Checked="smallChecked" />
                        </Div>
                        <Div class="col-md-4">
                            <h6>Default</h6>
                            <Switch Label="Default Switch" Size="Size.Default" @bind-Checked="defaultChecked" />
                        </Div>
                        <Div class="col-md-4">
                            <h6>Large</h6>
                            <Switch Label="Large Switch" Size="Size.Large" @bind-Checked="largeChecked" />
                        </Div>
                    </Div>
                </Div>
            </Div>
        </Div>
    </Div>

    <!-- Disabled State -->
    <Div class="row mb-4">
        <Div class="col-12">
            <Label style="font-size: 1.5rem; font-weight: bold;">Disabled State</Label>
            <Div class="card">
                <Div class="card-body">
                    <Div class="row">
                        <Div class="col-md-6">
                            <h6>Disabled (Unchecked)</h6>
                            <Switch Label="This switch is disabled" Disabled="true" Checked="false" />
                        </Div>
                        <Div class="col-md-6">
                            <h6>Disabled (Checked)</h6>
                            <Switch Label="This switch is disabled and checked" Disabled="true" Checked="true" />
                        </Div>
                    </Div>
                </Div>
            </Div>
        </Div>
    </Div>

    <!-- Event Handling -->
    <Div class="row mb-4">
        <Div class="col-12">
            <Label style="font-size: 1.5rem; font-weight: bold;">Event Handling</Label>
            <Div class="card">
                <Div class="card-body">
                    <Div class="row">
                        <Div class="col-md-6">
                            <h6>Click Events</h6>
                            <Switch Label="Click me to see events" @bind-Checked="eventChecked" OnClick="OnSwitchClick" />
                            <p class="text-muted mt-2">Click count: @clickCount</p>
                        </Div>
                        <Div class="col-md-6">
                            <h6>Change Events</h6>
                            <Switch Label="Change me to see events" @bind-Checked="changeChecked" OnChange="OnSwitchChange" />
                            <p class="text-muted mt-2">Last change: @lastChangeEvent</p>
                        </Div>
                    </Div>
                </Div>
            </Div>
        </Div>
    </Div>

    <!-- Form Integration -->
    <Div class="row mb-4">
        <Div class="col-12">
            <Label style="font-size: 1.5rem; font-weight: bold;">Form Integration</Label>
            <Div class="card">
                <Div class="card-body">
                    <form>
                        <Div class="mb-3">
                            <h6>User Preferences</h6>
                            <Switch Label="Email notifications" @bind-Checked="formData.EmailNotifications" />
                            <Switch Label="SMS notifications" @bind-Checked="formData.SmsNotifications" />
                            <Switch Label="Marketing emails" @bind-Checked="formData.MarketingEmails" />
                        </Div>
                        <button type="button" class="btn btn-primary" @onclick="SubmitForm">Submit Preferences</button>
                    </form>
                    <Div class="mt-3">
                        <h6>Form Data:</h6>
                        <pre class="bg-light p-2 rounded">@GetFormDataJson()</pre>
                    </Div>
                </Div>
            </Div>
        </Div>
    </Div>

    <!-- Interactive Demo -->
    <Div class="row mb-4">
        <Div class="col-12">
            <Label style="font-size: 1.5rem; font-weight: bold;">Interactive Demo</Label>
            <Div class="card">
                <Div class="card-body">
                    <Div class="row">
                        <Div class="col-md-6">
                            <h6>Master Switch</h6>
                            <Switch Label="Toggle all switches" @bind-Checked="masterSwitch" />
                        </Div>
                        <Div class="col-md-6">
                            <h6>Controlled Switches</h6>
                            <Switch Label="Option 1" Checked="masterSwitch" Disabled="true" />
                            <Switch Label="Option 2" Checked="masterSwitch" Disabled="true" />
                            <Switch Label="Option 3" Checked="masterSwitch" Disabled="true" />
                        </Div>
                    </Div>
                </Div>
            </Div>
        </Div>
    </Div>
</Div>

@code {
    // Binding Test Fields
    private bool _testSwitch1;
    private bool _testSwitch2 = true;

    // ChildContent examples
    private bool childContentChecked;
    private bool childContentChecked2 = true;
    private bool labelChecked;

    // Basic switches
    private bool basicChecked;
    private bool noLabelChecked = true;

    // Color variants
    private bool primaryChecked;
    private bool secondaryChecked = true;
    private bool successChecked;
    private bool dangerChecked = true;
    private bool warningChecked;
    private bool infoChecked = true;

    // Size variants
    private bool smallChecked;
    private bool defaultChecked = true;
    private bool largeChecked;

    // Event handling
    private bool eventChecked;
    private bool changeChecked;
    private int clickCount;
    private string lastChangeEvent = "No changes yet";

    // Form data
    private UserPreferences formData = new();

    // Interactive demo
    private bool masterSwitch;

    private void LoadSwitchTestData()
    {
        _testSwitch1 = true;
        _testSwitch2 = true;
    }
    
    private void ClearSwitchTestData()
    {
        _testSwitch1 = false;
        _testSwitch2 = false;
    }
    
    private void ToggleSwitchTestData()
    {
        _testSwitch1 = !_testSwitch1;
        _testSwitch2 = !_testSwitch2;
    }

    private void OnSwitchClick(MouseEventArgs e)
    {
        clickCount++;
        StateHasChanged();
    }

    private void OnSwitchChange(ChangeEventArgs e)
    {
        lastChangeEvent = $"Changed to: {e.Value} at {DateTime.Now:HH:mm:ss}";
        StateHasChanged();
    }

    private void SubmitForm()
    {
        // In a real application, you would submit the form data to a server
        Console.WriteLine("Form submitted with data: " + GetFormDataJson());
    }

    private string GetFormDataJson()
    {
        return System.Text.Json.JsonSerializer.Serialize(formData, new System.Text.Json.JsonSerializerOptions { WriteIndented = true });
    }

    public class UserPreferences
    {
        public bool EmailNotifications { get; set; } = true;
        public bool SmsNotifications { get; set; }
        public bool MarketingEmails { get; set; }
    }
}
