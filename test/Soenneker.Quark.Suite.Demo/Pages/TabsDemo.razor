@page "/tabs"

<div class="container-fluid py-4">
    <div class="row">
        <div class="col-12">
            <Div Class="text-center" Margin="Margin.Is5.FromBottom">
                <h1 class="display-4 fw-bold text-primary">Tabs</h1>
                <p class="lead text-muted">This page demonstrates the Quark.Tabs component with various configurations and use cases.</p>
            </Div>
        </Div>
    </Div>
    
    <div class="row g-4">
        <div class="col-12">
            <div>
                <h2>Basic Tabs</h2>
                <Div Margin="Margin.Is3.FromBottom">
                    <Tabs>
                        <Tab Name="tab1" Title="Home">
                            <div class="p-3">
                                <h5>Home Content</h5>
                                <p>This is the content for the Home tab. You can put any content here including other components.</p>
                                <Button BackgroundColor="BackgroundColor.Primary">Action Button</Button>
                            </Div>
                        </Tab>
                        <Tab Name="tab2" Title="Profile">
                            <div class="p-3">
                                <h5>Profile Content</h5>
                                <p>This is the content for the Profile tab. Here you might display user information or settings.</p>
                                <div class="form-group">
                                    <Label>Name:</Label>
                                    <TextEdit Placeholder="Enter your name" />
                                </Div>
                            </Div>
                        </Tab>
                        <Tab Name="tab3" Title="Settings">
                            <div class="p-3">
                                <h5>Settings Content</h5>
                                <p>This is the content for the Settings tab. Configuration options would go here.</p>
                                <Switch @bind-Checked="setting1">Enable notifications</Switch>
                            </Div>
                        </Tab>
                    </Tabs>
                </Div>
            </Div>

            <Hr />

            <div>
                <h2>Controlled Tabs</h2>
                <Div Margin="Margin.Is3.FromBottom">
                    <Tabs SelectedTab="@selectedTab" OnSelectedTabChanged="HandleTabChanged">
                        <Tab Name="controlled1" Title="First Tab">
                            <div class="p-3">
                                <h5>First Tab Content</h5>
                                <p>This is the first tab content. Current selected tab: <Strong>@selectedTab</Strong></p>
                            </Div>
                        </Tab>
                        <Tab Name="controlled2" Title="Second Tab">
                            <div class="p-3">
                                <h5>Second Tab Content</h5>
                                <p>This is the second tab content. Current selected tab: <Strong>@selectedTab</Strong></p>
                            </Div>
                        </Tab>
                        <Tab Name="controlled3" Title="Third Tab">
                            <div class="p-3">
                                <h5>Third Tab Content</h5>
                                <p>This is the third tab content. Current selected tab: <Strong>@selectedTab</Strong></p>
                            </Div>
                        </Tab>
                    </Tabs>
                </Div>
                <Div Margin="Margin.Is3.FromBottom">
                    <Button BackgroundColor="BackgroundColor.Primary" Size="Size.Small" OnClick="GoToFirstTab">Go to First Tab</Button>
                    <Button BackgroundColor="BackgroundColor.Secondary" Size="Size.Small" OnClick="GoToSecondTab">Go to Second Tab</Button>
                    <Button BackgroundColor="BackgroundColor.Success" Size="Size.Small" OnClick="GoToThirdTab">Go to Third Tab</Button>
                </Div>
            </Div>

            <Hr />

            <div>
                <h2>Tabs with Different Styles</h2>
                <Div Margin="Margin.Is3.FromBottom">
                    <h5>Pills Style</h5>
                    <Tabs Pills="true">
                        <Tab Name="pills1" Title="Pill 1">
                            <div class="p-3">
                                <h5>Pill Tab 1</h5>
                                <p>This tab uses the pills style for a different appearance.</p>
                            </Div>
                        </Tab>
                        <Tab Name="pills2" Title="Pill 2">
                            <div class="p-3">
                                <h5>Pill Tab 2</h5>
                                <p>Another pill-style tab with different content.</p>
                            </Div>
                        </Tab>
                        <Tab Name="pills3" Title="Pill 3">
                            <div class="p-3">
                                <h5>Pill Tab 3</h5>
                                <p>Third pill-style tab to demonstrate the styling.</p>
                            </Div>
                        </Tab>
                    </Tabs>
                </Div>
            </Div>

            <Hr />

            <div>
                <h2>Tabs with Icons</h2>
                <Div Margin="Margin.Is3.FromBottom">
                    <Tabs>
                        <Tab Name="icon1" Title="Home" IconName="home">
                            <div class="p-3">
                                <h5>Home with Icon</h5>
                                <p>This tab has a home icon in the title.</p>
                            </Div>
                        </Tab>
                        <Tab Name="icon2" Title="Profile" IconName="user">
                            <div class="p-3">
                                <h5>Profile with Icon</h5>
                                <p>This tab has a user icon in the title.</p>
                            </Div>
                        </Tab>
                        <Tab Name="icon3" Title="Settings" IconName="cog">
                            <div class="p-3">
                                <h5>Settings with Icon</h5>
                                <p>This tab has a settings icon in the title.</p>
                            </Div>
                        </Tab>
                        <Tab Name="icon4" Title="Messages" IconName="envelope">
                            <div class="p-3">
                                <h5>Messages with Icon</h5>
                                <p>This tab has an envelope icon in the title.</p>
                            </Div>
                        </Tab>
                    </Tabs>
                </Div>
            </Div>

            <Hr />

            <div>
                <h2>Vertical Tabs</h2>
                <Div Margin="Margin.Is3.FromBottom">
                    <Tabs Vertical="true">
                        <Tab Name="vertical1" Title="Dashboard">
                            <div class="p-3">
                                <h5>Dashboard Content</h5>
                                <p>This is a vertical tab layout. The tabs are displayed on the left side.</p>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-body">
                                                <h6 class="card-title">Widget 1</h6>
                                                <p class="card-text">Some content here</p>
                                            </Div>
                                        </Div>
                                    </Div>
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-body">
                                                <h6 class="card-title">Widget 2</h6>
                                                <p class="card-text">Some content here</p>
                                            </Div>
                                        </Div>
                                    </Div>
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-body">
                                                <h6 class="card-title">Widget 3</h6>
                                                <p class="card-text">Some content here</p>
                                            </Div>
                                        </Div>
                                    </Div>
                                </Div>
                            </Div>
                        </Tab>
                        <Tab Name="vertical2" Title="Analytics">
                            <div class="p-3">
                                <h5>Analytics Content</h5>
                                <p>Analytics and reporting features would be displayed here.</p>
                                <div class="progress mb-2">
                                    <div class="progress-bar" style="width: 75%">75%</Div>
                                </Div>
                                <div class="progress mb-2">
                                    <div class="progress-bar bg-success" style="width: 60%">60%</Div>
                                </Div>
                                <div class="progress">
                                    <div class="progress-bar bg-warning" style="width: 40%">40%</Div>
                                </Div>
                            </Div>
                        </Tab>
                        <Tab Name="vertical3" Title="Reports">
                            <div class="p-3">
                                <h5>Reports Content</h5>
                                <p>Various reports and data visualization would be shown here.</p>
                                <Button BackgroundColor="BackgroundColor.Primary">Generate Report</Button>
                                <Button BackgroundColor="BackgroundColor.Secondary">Export Data</Button>
                            </Div>
                        </Tab>
                    </Tabs>
                </Div>
            </Div>

            <Hr />

            <div>
                <h2>Disabled Tabs</h2>
                <Div Margin="Margin.Is3.FromBottom">
                    <Tabs>
                        <Tab Name="disabled1" Title="Enabled Tab">
                            <div class="p-3">
                                <h5>This tab is enabled</h5>
                                <p>You can interact with this tab normally.</p>
                            </Div>
                        </Tab>
                        <Tab Name="disabled2" Title="Disabled Tab" Disabled="true">
                            <div class="p-3">
                                <h5>This tab is disabled</h5>
                                <p>This content won't be shown because the tab is disabled.</p>
                            </Div>
                        </Tab>
                        <Tab Name="disabled3" Title="Another Enabled Tab">
                            <div class="p-3">
                                <h5>This tab is also enabled</h5>
                                <p>You can switch to this tab as well.</p>
                            </Div>
                        </Tab>
                    </Tabs>
                </Div>
            </Div>

            <Hr />

            <div>
                <h2>Dynamic Tabs</h2>
                <Div Margin="Margin.Is3.FromBottom">
                    <Soenneker.Quark.Tabs.Tabs SelectedTab="@dynamicSelectedTab" OnSelectedTabChanged="HandleDynamicTabChanged">
                        @foreach (var tab in dynamicTabs)
                        {
                            <Tab Name="@tab.Name" Title="@tab.Title">
                                <div class="p-3">
                                    <h5>@tab.Title Content</h5>
                                    <p>This is dynamic tab content for: <Strong>@tab.Title</Strong></p>
                                    <p>Tab ID: <code>@tab.Name</code></p>
                                </Div>
                            </Tab>
                        }
                    </Soenneker.Quark.Tabs.Tabs>
                </Div>
                <Div Margin="Margin.Is3.FromBottom">
                    <Button BackgroundColor="BackgroundColor.Primary" Size="Size.Small" OnClick="AddDynamicTab">Add Tab</Button>
                    <Button BackgroundColor="BackgroundColor.Danger" Size="Size.Small" OnClick="RemoveDynamicTab">Remove Last Tab</Button>
                    <Button BackgroundColor="BackgroundColor.Info" Size="Size.Small" OnClick="ClearDynamicTabs">Clear All Tabs</Button>
                </Div>
                <p class="text-muted">Dynamic tabs count: <Strong>@dynamicTabs.Count</Strong></p>
            </Div>
        </Div>
    </Div>
</Div>

@code {
    private string selectedTab = "controlled1";
    private string dynamicSelectedTab = "";
    private List<DynamicTab> dynamicTabs = [];
    private int dynamicTabCounter = 1;
    private bool setting1;

    public class DynamicTab
    {
        public string Name { get; set; } = "";
        public string Title { get; set; } = "";
    }

    private async Task HandleTabChanged(string tabName)
    {
        selectedTab = tabName;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task HandleDynamicTabChanged(string tabName)
    {
        dynamicSelectedTab = tabName;
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task GoToFirstTab()
    {
        selectedTab = "controlled1";
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task GoToSecondTab()
    {
        selectedTab = "controlled2";
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task GoToThirdTab()
    {
        selectedTab = "controlled3";
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task AddDynamicTab()
    {
        var newTab = new DynamicTab
        {
            Name = $"dynamic{dynamicTabCounter}",
            Title = $"Dynamic Tab {dynamicTabCounter}"
        };
        dynamicTabs.Add(newTab);
        dynamicTabCounter++;
        
        if (dynamicTabs.Count == 1)
        {
            dynamicSelectedTab = newTab.Name;
        }
        
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task RemoveDynamicTab()
    {
        if (dynamicTabs.Count > 0)
        {
            var lastTab = dynamicTabs.Last();
            dynamicTabs.Remove(lastTab);
            
            if (dynamicSelectedTab == lastTab.Name)
            {
                dynamicSelectedTab = dynamicTabs.Count > 0 ? dynamicTabs.Last().Name : "";
            }
        }
        
        StateHasChanged();
        await Task.CompletedTask;
    }

    private async Task ClearDynamicTabs()
    {
        dynamicTabs.Clear();
        dynamicSelectedTab = "";
        StateHasChanged();
        await Task.CompletedTask;
    }

    protected override void OnInitialized()
    {
        // Initialize with a few dynamic tabs
        dynamicTabs.Add(new DynamicTab { Name = "dynamic1", Title = "Dynamic Tab 1" });
        dynamicTabs.Add(new DynamicTab { Name = "dynamic2", Title = "Dynamic Tab 2" });
        dynamicSelectedTab = "dynamic1";
    }
}
