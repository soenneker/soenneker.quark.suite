@page "/modals"
@using Microsoft.Extensions.Logging

@inject ILogger<Index> Logger

<Container Class="py-4">
    <Row>
        <Column>
            <Div Class="text-center" Margin="Margin.Is5.FromEnd">
                <H1 Class="display-4 fw-bold text-primary">Modals</H1>
                <Paragraph Class="lead text-muted">This page demonstrates the modal component functionality.</Paragraph>
            </Div>
        </Column>
    </Row>
    
    <Row Gap="Gap.Is4">
        <Column>
            <Div>
                <H2>Basic Modal</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Button BackgroundColor="@BackgroundColor.Primary" OnClick="@(() => ShowBasicModal = true)">Show Basic Modal</Button>
                </Div>
            </Div>

            <Hr/>

            <Div>
                <H2>Large Modal</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Button BackgroundColor="@BackgroundColor.Success" OnClick="@(() => ShowLargeModal = true)">Show Large Modal</Button>
                </Div>
            </Div>

            <Hr/>

            <Div>
                <H2>Centered Modal</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Button BackgroundColor="@BackgroundColor.Info" OnClick="@(() => ShowCenteredModal = true)">Show Centered Modal</Button>
                </Div>
            </Div>

            <Hr/>

            <Div>
                <H2>Static Backdrop Modal</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Button BackgroundColor="@BackgroundColor.Warning" OnClick="@(() => ShowStaticModal = true)">Show Static Modal</Button>
                </Div>
            </Div>

            <Hr/>

            <Div>
                <H2>Scrollable Modal</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Button BackgroundColor="@BackgroundColor.Secondary" OnClick="@(() => ShowScrollableModal = true)">Show Scrollable Modal</Button>
                </Div>
            </Div>

            <Hr/>

            <Div>
                <H2>New Components Modal</H2>
                <Div Margin="Margin.Is3.FromEnd">
                    <Button BackgroundColor="@BackgroundColor.Dark" OnClick="@(() => ShowNewComponentsModal = true)">Show New Components Modal</Button>
                </Div>
            </Div>
        </Column>
    </Row>
</Container>

<!-- Basic Modal -->
<Modal @bind-Visible="ShowBasicModal" Size="@Size.Default">
    <ModalHeader>
        <ModalTitle Scale="@Scale.Is5">Basic Modal</ModalTitle>
        <ModalCloseButton />
    </ModalHeader>
    <ModalBody>
        <p>This is a basic modal with default settings.</p>
        <p>You can close it by clicking the X button, clicking outside the modal, or pressing the ESC key.</p>
    </ModalBody>
    <ModalFooter>
        <Button Type="@ButtonType.Button" Class="btn-secondary" OnClick="@(() => ShowBasicModal = false)">Close</Button>
        <Button Type="@ButtonType.Button" Class="btn-primary" OnClick="@(() => ShowBasicModal = false)">Save changes</Button>
    </ModalFooter>
</Modal>

<!-- Large Modal -->
<Modal @bind-Visible="ShowLargeModal" Size="@Size.Large">
    <ModalHeader>
        <ModalTitle Scale="@Scale.Is4">Large Modal</ModalTitle>
        <ModalCloseButton />
    </ModalHeader>
    <ModalBody>
        <p>This is a large modal using the Large size variant.</p>
        <p>Large modals have more width and are useful for displaying more content.</p>
        <div class="row">
            <div class="col-md-6">
                <h5>Column 1</h5>
                <p>Some content in the first column.</p>
            </Div>
            <div class="col-md-6">
                <h5>Column 2</h5>
                <p>Some content in the second column.</p>
            </Div>
        </Div>
    </ModalBody>
    <ModalFooter>
        <Button Type="@ButtonType.Button" Class="btn-secondary" OnClick="@(() => ShowLargeModal = false)">Close</Button>
        <Button Type="@ButtonType.Button" Class="btn-primary" OnClick="@(() => ShowLargeModal = false)">Save changes</Button>
    </ModalFooter>
</Modal>

<!-- Centered Modal -->
<Modal @bind-Visible="ShowCenteredModal" Size="@Size.Default" Centered="true">
    <ModalHeader>
        <ModalTitle Scale="@Scale.Is5">Centered Modal</ModalTitle>
        <ModalCloseButton />
    </ModalHeader>
    <ModalBody>
        <p>This modal is vertically centered on the page.</p>
        <p>The Centered property makes the modal appear in the middle of the viewport.</p>
    </ModalBody>
    <ModalFooter>
        <Button Type="@ButtonType.Button" Class="btn-secondary" OnClick="@(() => ShowCenteredModal = false)">Close</Button>
        <Button Type="@ButtonType.Button" Class="btn-primary" OnClick="@(() => ShowCenteredModal = false)">Save changes</Button>
    </ModalFooter>
</Modal>

<!-- Static Backdrop Modal -->
<Modal @bind-Visible="ShowStaticModal" Size="@Size.Default" Static="true">
    <ModalHeader>
        <ModalTitle Scale="@Scale.Is5">Static Backdrop Modal</ModalTitle>
        <ModalCloseButton />
    </ModalHeader>
    <ModalBody>
        <p>This modal has a static backdrop.</p>
        <p>You cannot close it by clicking outside the modal - you must use the close button or programmatically close it.</p>
    </ModalBody>
    <ModalFooter>
        <Button Type="@ButtonType.Button" Class="btn-secondary" OnClick="@(() => ShowStaticModal = false)">Close</Button>
        <Button Type="@ButtonType.Button" Class="btn-primary" OnClick="@(() => ShowStaticModal = false)">Save changes</Button>
    </ModalFooter>
</Modal>

<!-- Scrollable Modal -->
<Modal @bind-Visible="ShowScrollableModal" Size="@Size.Default" Scrollable="true">
    <ModalHeader>
        <ModalTitle Scale="@Scale.Is5">Scrollable Modal</ModalTitle>
        <ModalCloseButton />
    </ModalHeader>
    <ModalBody>
        <p>This modal is scrollable when content overflows.</p>
        @for (var i = 1; i <= 50; i++)
        {
            <p>This is line @i of content to demonstrate scrolling.</p>
        }
        <p>You can scroll through all this content within the modal.</p>
    </ModalBody>
    <ModalFooter>
        <Button Type="@ButtonType.Button" Class="btn-secondary" OnClick="@(() => ShowScrollableModal = false)">Close</Button>
        <Button Type="@ButtonType.Button" Class="btn-primary" OnClick="@(() => ShowScrollableModal = false)">Save changes</Button>
    </ModalFooter>
</Modal>

<!-- New Components Modal -->
<Modal @bind-Visible="ShowNewComponentsModal" Size="@Size.Large">
    <ModalHeader>
        <ModalTitle Scale="@Scale.Is3">New Modal Components</ModalTitle>
        <ModalCloseButton />
    </ModalHeader>
    <ModalBody>
        <p>This modal demonstrates the new separate <code>ModalTitle</code> and <code>ModalCloseButton</code> components!</p>
        
        <h5>Key Features:</h5>
        <ul>
            <UnorderedListItem><strong>ModalTitle:</strong> Separate component with configurable heading size (Is1-Is6)</UnorderedListItem>
            <UnorderedListItem><strong>ModalCloseButton:</strong> Reusable close button that automatically detects parent modal</UnorderedListItem>
            <UnorderedListItem><strong>Flexible Layout:</strong> You can now arrange header content however you want</UnorderedListItem>
        </ul>
        
        <div class="alert alert-info mt-3">
            <h6>Before vs After:</h6>
            <p><strong>Old way:</strong> ModalHeader with ModalTitle and ShowCloseButton parameters</p>
            <p><strong>New way:</strong> ModalHeader as container + separate ModalTitle and ModalCloseButton components</p>
        </Div>
        
        <h5>Different Title Sizes:</h5>
        <div class="row">
            <div class="col-md-6">
                <h6>Small Title (Is6):</h6>
                <ModalTitle Scale="@Scale.Is6">Small Modal Title</ModalTitle>
            </Div>
            <div class="col-md-6">
                <h6>Large Title (Is2):</h6>
                <ModalTitle Scale="@Scale.Is2">Large Modal Title</ModalTitle>
            </Div>
        </Div>
    </ModalBody>
    <ModalFooter>
        <Button Type="@ButtonType.Button" Class="btn-secondary" OnClick="@(() => ShowNewComponentsModal = false)">Close</Button>
        <Button Type="@ButtonType.Button" Class="btn-primary" OnClick="@(() => ShowNewComponentsModal = false)">Got it!</Button>
    </ModalFooter>
</Modal>

@code {
    private bool ShowBasicModal;
    private bool ShowLargeModal;
    private bool ShowCenteredModal;
    private bool ShowStaticModal;
    private bool ShowScrollableModal;
    private bool ShowNewComponentsModal;

    protected override void OnInitialized()
    {
        Logger.LogInformation("Modal demo page initialized");
    }
}
