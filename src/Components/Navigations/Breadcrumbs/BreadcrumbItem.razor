@namespace Soenneker.Quark
@inherits Soenneker.Quark.Element
@implements IBreadcrumbItem

@if (To.HasContent())
{
    <li @attributes="BuildListItemAttributes()">
        <Anchor To="@To" @attributes="BuildAttributes()">
            @ChildContent
        </Anchor>
    </li>
}
else
{
    <li @attributes="BuildAttributes()">
        @ChildContent
    </li>
}

@code {
    // shadcn - new-york-v4
    /// <summary>
    /// Gets or sets the URL to navigate to.
    /// </summary>
    [Parameter]
    public string? To { get; set; }

    /// <summary>
    /// Gets or sets whether the breadcrumb item is active.
    /// </summary>
    [Parameter]
    public bool Active { get; set; }

    protected override void BuildAttributesCore(Dictionary<string, object> attributes)
    {
        BuildClassAttribute(attributes, (ref cls) =>
        {
            AppendClass(ref cls, "q-breadcrumb-item");
            AppendClass(ref cls, "inline-flex items-center gap-1.5");
            if (Active)
                AppendClass(ref cls, "font-medium text-foreground");
        });

        if (Active)
        {
            attributes["aria-current"] = "page";
        }
    }

    private Dictionary<string, object> BuildListItemAttributes()
    {
        var attributes = new Dictionary<string, object>();
        BuildClassAttribute(attributes, (ref cls) => AppendClass(ref cls, "inline-flex items-center gap-1.5"));
        return attributes;
    }

    protected override void ComputeRenderKeyCore(ref HashCode hc)
    {
        hc.Add(To);
        hc.Add(Active);
    }
}