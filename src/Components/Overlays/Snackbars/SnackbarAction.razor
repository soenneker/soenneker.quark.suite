@namespace Soenneker.Quark

@inherits Soenneker.Quark.Element
@implements ISnackbarAction

<Button @attributes="BuildAttributes()" @onclick:stopPropagation="true">
	@ChildContent
</Button>

@code {
    // shadcn - new-york-v4
	protected override void BuildAttributesCore(Dictionary<string, object> attrs)
	{
		base.BuildAttributesCore(attrs);
		// Merge class: ensure the close-button token is present exactly once
		attrs.TryGetValue("class", out var classObj);
		var cls = classObj?.ToString() ?? string.Empty;
		cls = EnsureClass(cls, "q-snackbar-action");
		cls = EnsureClass(cls, "rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2");
		if (cls.Length > 0)
			attrs["class"] = cls;

		// Default attributes (don't stomp user-provided values)
		attrs.TryAdd("type", "button");

		attrs.TryAdd("aria-label", "Close");

		// Leave any "@onclick:stopPropagation" etc. intact so they flow through to the inner element
	}
}
