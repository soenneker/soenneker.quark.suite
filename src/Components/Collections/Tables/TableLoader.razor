@namespace Soenneker.Quark
@inherits Element

<div @attributes="BuildAttributes()">
	@if (IsLoading)
	{
		@if (ChildContent != null)
		{
			@ChildContent
		}
		else
		{
			<div Class="quark-table-loader-overlay" >
				<div Class="quark-table-loader-content">
					<div Class="quark-table-loader-default">
						<div Class="quark-table-spinner" ></div>
						<span>Loading...</span>
					</div>
				</div>
			</div>
		}
	}
</div>

@code {
	public override string? ThemeKey { get; set; } = "TableLoader";

	[CascadingParameter(Name = "IsLoading")]
	public bool IsLoading { get; set; }

	protected override Dictionary<string, object> BuildAttributes()
	{
		var attributes = base.BuildAttributes();
		
		BuildClassAttribute(attributes, (ref PooledStringBuilder cls) =>
		{
			AppendClass(ref cls, "quark-table-loader");
			if (IsLoading)
				AppendClass(ref cls, "quark-table-loader-active");
		});
		
		return attributes;
	}

}
