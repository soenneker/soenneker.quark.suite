
@namespace Soenneker.Quark
@inherits Element

@if (Table?.HasLoadedOnce == true)
{
    @if (ChildContent != null)
    {
        @ChildContent
    }
    else
    {
        <div @attributes="BuildAttributes()">
            <div Class="q-table-no-data-content">
                <div Class="q-table-no-data-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M3 3H21V21H3V3ZM5 5V19H19V5H5ZM7 7H17V9H7V7ZM7 11H17V13H7V11ZM7 15H13V17H7V15Z" fill="currentColor" />
                    </svg>
                </div>
                <div Class="q-table-no-data-text">
                    <H4>No data available</H4>
                    <Paragraph>There are no records to display at this time.</Paragraph>
                </div>
            </div>
        </div>
    }
}

@code {
    [CascadingParameter(Name = nameof(Table))]
    public ITable? Table { get; set; }

    // shadcn Empty state - new-york-v4 ui/empty.tsx
    protected override void BuildAttributesCore(Dictionary<string, object> attributes)
    {
        BuildClassAttribute(attributes, (ref cls) =>
        {
            AppendClass(ref cls, "q-table-no-data");
            AppendClass(ref cls, "text-muted-foreground flex flex-col items-center justify-center py-12");
        });
    }

    protected override void ComputeRenderKeyCore(ref HashCode hc)
    {
        if (Table is not null)
            hc.Add(Table.HasLoadedOnce);
    }
} 
