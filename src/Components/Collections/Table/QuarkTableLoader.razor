@namespace Soenneker.Quark
@inherits Element

<Div @attributes="BuildAttributes()">
	@if (IsLoading)
	{
		@if (ChildContent != null)
		{
			@ChildContent
		}
		else
		{
			<Div Class="quark-table-loader-overlay" >
				<Div Class="quark-table-loader-content">
					<Div Class="quark-table-loader-default">
						<Div Class="quark-table-spinner" ></Div>
						<span>Loading...</span>
					</Div>
				</Div>
			</Div>
		}
	}
</Div>

@code {
	public override string? ThemeKey { get; set; } = "QuarkTableLoader";

	[CascadingParameter(Name = "IsLoading")]
	public bool IsLoading { get; set; }

	protected override Dictionary<string, object> BuildAttributes()
	{
		var attributes = base.BuildAttributes();
		
		BuildClassAttribute(attributes, (ref PooledStringBuilder cls) =>
		{
			AppendClass(ref cls, "quark-table-loader");
			if (IsLoading)
				AppendClass(ref cls, "quark-table-loader-active");
		});
		
		return attributes;
	}

}
